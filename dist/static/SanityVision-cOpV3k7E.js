var qu=Object.defineProperty;var Ju=(t,e,u)=>e in t?qu(t,e,{enumerable:!0,configurable:!0,writable:!0,value:u}):t[e]=u;var ft=(t,e,u)=>Ju(t,typeof e!="symbol"?e+"":e,u);import{r as w,j as a,a as ne,u as pu,C as re,b as Uu,S as ge,B as Le,H as Hu,e as St,F as we,f as Wu,h as Qu,i as Oe,v as Pe,k as Cu,l as Mt,m as Ku,n as Y,o as ee,p as Lt,q as Ke,s as Xu,G as Yu,t as Gu,w as Zu,x as Vt,P as kt,y as Ee,z as er,J as tr,A as Tt,D as Fu,I as ur,L as rr,T as ye,E as nr,K as ir,M as pt,N as hu,O as sr,Q as Au,U as ar,V as or,W as Eu,X as lr,Y as cr,Z as Dr}from"./sanity-B9Yf1yr6.js";import{R as dr,l as fr,h as pr,a as Cr,b as Fr,c as hr,i as Ar,d as Er,e as mr,f as gr,g as yr,s as mu,k as Br,j as xr,m as vr,E as br,H as Sr,t as I,n as jr,o as wr}from"./index-dORNDEoF.js";import{javascriptLanguage as _r}from"./index-DozVP9dZ.js";import"./index-CEOyV7d4.js";var Or=Object.defineProperty,qt=Object.getOwnPropertySymbols,Pr=Object.prototype.hasOwnProperty,Rr=Object.prototype.propertyIsEnumerable,Jt=(t,e,u)=>e in t?Or(t,e,{enumerable:!0,configurable:!0,writable:!0,value:u}):t[e]=u,Ut=(t,e)=>{for(var u in e||(e={}))Pr.call(e,u)&&Jt(t,u,e[u]);if(qt)for(var u of qt(e))Rr.call(e,u)&&Jt(t,u,e[u]);return t};const Ht=function(t){const{children:e,className:u,split:s,style:l,size:n,eleRef:o}=t;let r={flex:1,position:"relative",outline:"none"};n!==void 0&&(s==="vertical"?r.width=n:(r.height=n,r.display="flex"),r.flex="none"),r=Ut(Ut({},r),l);const i=["Pane",s,u].filter(Boolean).join(" ");return a.jsx("div",{role:"region",ref:o,className:i,style:r,children:e})},gt="Resizer",Nr=function(t){const{className:e=gt,onClick:u,onDoubleClick:s,onMouseDown:l,onTouchEnd:n,onTouchStart:o,resizerClassName:r,split:i,style:d}=t,F=[r,i,e].filter(Boolean).join(" ");return a.jsx("span",{role:"separator",className:F,style:d,onMouseDown:h=>l(h.nativeEvent),onTouchStart:h=>{h.preventDefault(),o(h.nativeEvent)},onTouchEnd:h=>{h.preventDefault(),n(h.nativeEvent)},onClick:h=>{u&&(h.preventDefault(),u(h.nativeEvent))},onDoubleClick:h=>{s&&(h.preventDefault(),s(h.nativeEvent))}})};var zr=Object.defineProperty,Ir=Object.defineProperties,$r=Object.getOwnPropertyDescriptors,Wt=Object.getOwnPropertySymbols,Mr=Object.prototype.hasOwnProperty,Lr=Object.prototype.propertyIsEnumerable,yt=(t,e,u)=>e in t?zr(t,e,{enumerable:!0,configurable:!0,writable:!0,value:u}):t[e]=u,de=(t,e)=>{for(var u in e||(e={}))Mr.call(e,u)&&yt(t,u,e[u]);if(Wt)for(var u of Wt(e))Lr.call(e,u)&&yt(t,u,e[u]);return t},et=(t,e)=>Ir(t,$r(e)),Ze=(t,e,u)=>yt(t,typeof e!="symbol"?e+"":e,u);const gu={display:"flex",flex:1,height:"100%",position:"absolute",outline:"none",overflow:"hidden",MozUserSelect:"text",WebkitUserSelect:"text",msUserSelect:"text",userSelect:"text"},Vr=et(de({},gu),{flexDirection:"row",left:0,right:0}),kr=et(de({},gu),{bottom:0,flexDirection:"column",minHeight:"100%",top:0,width:"100%"}),Ct={},yu=class He extends w.Component{constructor(e){super(e),Ze(this,"pane1",null),Ze(this,"pane2",null),Ze(this,"splitPane",null),this.onMouseDown=this.onMouseDown.bind(this),this.onTouchStart=this.onTouchStart.bind(this),this.onMouseMove=this.onMouseMove.bind(this),this.onTouchMove=this.onTouchMove.bind(this),this.onMouseUp=this.onMouseUp.bind(this);const{size:u,defaultSize:s,minSize:l,maxSize:n,primary:o}=e,r=u!==void 0?u:Xt(s,l,n,void 0);this.state={active:!1,resized:!1,pane1Size:o==="first"?r:void 0,pane2Size:o==="second"?r:void 0,instanceProps:{size:u}}}componentDidMount(){document.addEventListener("mouseup",this.onMouseUp),document.addEventListener("mousemove",this.onMouseMove),document.addEventListener("touchmove",this.onTouchMove),this.setState(He.getSizeUpdate(this.props,this.state))}static getDerivedStateFromProps(e,u){return He.getSizeUpdate(e,u)}componentWillUnmount(){document.removeEventListener("mouseup",this.onMouseUp),document.removeEventListener("mousemove",this.onMouseMove),document.removeEventListener("touchmove",this.onTouchMove)}onMouseDown(e){this.onTouchStart(et(de({},e),{touches:[{clientX:e.clientX,clientY:e.clientY}]}))}onTouchStart(e){const{allowResize:u,onDragStarted:s,split:l}=this.props;if(u){Kt(document,window);const n=l==="vertical"?e.touches[0].clientX:e.touches[0].clientY;typeof s=="function"&&s(),this.setState({active:!0,position:n})}}onMouseMove(e){const u=Object.assign({},e,{touches:[{clientX:e.clientX,clientY:e.clientY}]});this.onTouchMove(u)}onTouchMove(e){if(!this.state.active||!this.props.allowResize)return;const{position:u=0}=this.state,{maxSize:s,minSize:l=He.defaultProps.minSize,onChange:n,split:o=He.defaultProps.split,step:r}=this.props;Kt(document,window);const i=this.props.primary==="first",d=i?this.pane1:this.pane2,F=i?this.pane2:this.pane1;if(!d||!F||!d.getBoundingClientRect)return;const h=d,b=F,g=h.getBoundingClientRect().width,m=h.getBoundingClientRect().height,c=o==="vertical"?e.touches[0].clientX:e.touches[0].clientY,x=o==="vertical"?g:m;let C=u-c;if(r){if(Math.abs(C)<r)return;C=~~(C/r)*r}let S=i?C:-C;const _=parseInt(window.getComputedStyle(h).order),j=parseInt(window.getComputedStyle(b).order);_>j&&(S=-S);let v=s;this.splitPane&&s!==void 0&&s<=0&&(o==="vertical"?v=this.splitPane.getBoundingClientRect().width+s:v=this.splitPane.getBoundingClientRect().height+s);let O=x-S;const M=u-C;l&&O<l?O=l:v!==void 0&&O>v?O=v:this.setState({position:M,resized:!0}),n&&n(O);const J=i?{pane1Size:O,pane2Size:void 0}:{pane2Size:O,pane1Size:void 0};this.setState(de({draggedSize:O},J))}onMouseUp(){if(!this.state.active||!this.props.allowResize)return;const{onDragFinished:e}=this.props,{draggedSize:u}=this.state;typeof u<"u"&&typeof e=="function"&&e(u),this.setState({active:!1})}static getSizeUpdate(e,u){const{instanceProps:s}=u;if(s.size===e.size&&e.size!==void 0)return{};const l=e.size!==void 0?e.size:Xt(e.defaultSize,e.minSize,e.maxSize,u.draggedSize),n=e.primary==="first"?{pane1Size:l,pane2Size:void 0}:{pane2Size:l,pane1Size:void 0};return et(de(de({},n),typeof e.size>"u"?{}:{draggedSize:l}),{instanceProps:{size:e.size}})}render(){const{allowResize:e,children:u,className:s,onResizerClick:l,onResizerDoubleClick:n,paneClassName:o,pane1ClassName:r,pane2ClassName:i,paneStyle:d,pane1Style:F,pane2Style:h,resizerClassName:b=gt,resizerStyle:g,split:m,style:c}=this.props,{pane1Size:x,pane2Size:C}=this.state,S=e?"":"disabled",_=b&&`${b} ${gt}`,j=Tr(u),v=m==="vertical"?Vr:kr,O=c?de(de({},v),c):v,M=["SplitPane",s,m,S].filter(Boolean).join(" "),J=Yt(de(de({},d),F),Ct),E=Yt(de(de({},d),h),Ct),D=["Pane1",o,r].join(" "),y=["Pane2",o,i].join(" ");return a.jsxs("div",{"data-testid":"split-pane",className:M,style:O,ref:B=>{this.splitPane=B},children:[a.jsx(Ht,{className:D,eleRef:B=>{this.pane1=B},size:x,split:m,style:J,children:j[0]},"pane1"),a.jsx(Nr,{className:S,onClick:l,onDoubleClick:n,onMouseDown:this.onMouseDown,onTouchStart:this.onTouchStart,onTouchEnd:this.onMouseUp,resizerClassName:_,split:m||"vertical",style:g||Ct},"resizer"),a.jsx(Ht,{className:y,eleRef:B=>{this.pane2=B},size:C,split:m,style:E,children:j[1]},"pane2")]})}};Ze(yu,"defaultProps",{allowResize:!0,minSize:50,primary:"first",split:"vertical",paneClassName:"",pane1ClassName:"",pane2ClassName:""});let Qt=yu;function Kt(t,e){var u;if("selection"in t&&typeof t.selection=="object"&&t.selection&&"empty"in t.selection&&typeof t.selection.empty=="function")try{t.selection.empty()}catch{}else if(typeof e<"u"&&typeof e.getSelection=="function")try{(u=e.getSelection())==null||u.removeAllRanges()}catch{}}function Xt(t,e,u,s){if(typeof s=="number"){const l=typeof e=="number"?e:0,n=typeof u=="number"&&u>=0?u:1/0;return Math.max(l,Math.min(n,s))}return t!==void 0?t:e}function Tr(t){return w.Children.toArray(t).filter(e=>e)}function qr(t){return t===null||typeof t>"u"||Object.keys(t).length===0}function Yt(t,e){return qr(t)?e:t}var Jr=/[\u1680\u2000-\u200A\u202F\u205F\u3000]/,Ur=/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE83\uDE86-\uDE89\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]/,Hr=/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u08D4-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u09FC\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9-\u0AFF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D00-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19D9\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1CD0-\u1CD2\u1CD4-\u1CF9\u1D00-\u1DF9\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u2E2F\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099\u309A\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDCA-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3C-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB7\uDEC0-\uDEC9\uDF00-\uDF19\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDCA0-\uDCE9\uDCFF\uDE00-\uDE3E\uDE47\uDE50-\uDE83\uDE86-\uDE99\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD47\uDD50-\uDD59]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50-\uDF7E\uDF8F-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4A\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/,Ft={Space_Separator:Jr,ID_Start:Ur,ID_Continue:Hr},te={isSpaceSeparator(t){return typeof t=="string"&&Ft.Space_Separator.test(t)},isIdStartChar(t){return typeof t=="string"&&(t>="a"&&t<="z"||t>="A"&&t<="Z"||t==="$"||t==="_"||Ft.ID_Start.test(t))},isIdContinueChar(t){return typeof t=="string"&&(t>="a"&&t<="z"||t>="A"&&t<="Z"||t>="0"&&t<="9"||t==="$"||t==="_"||t==="‌"||t==="‍"||Ft.ID_Continue.test(t))},isDigit(t){return typeof t=="string"&&/[0-9]/.test(t)},isHexDigit(t){return typeof t=="string"&&/[0-9A-Fa-f]/.test(t)}};let Bt,le,be,tt,_e,me,ie,jt,ut;var Wr=function(e,u){Bt=String(e),le="start",be=[],tt=0,_e=1,me=0,ie=void 0,jt=void 0,ut=void 0;do ie=Qr(),Yr[le]();while(ie.type!=="eof");return ut};let q,V,We,ve,Q;function Qr(){for(q="default",V="",We=!1,ve=1;;){Q=je();const t=Bu[q]();if(t)return t}}function je(){if(Bt[tt])return String.fromCodePoint(Bt.codePointAt(tt))}function A(){const t=je();return t===`
`?(_e++,me=0):t?me+=t.length:me++,t&&(tt+=t.length),t}const Bu={default(){switch(Q){case"	":case"\v":case"\f":case" ":case" ":case"\uFEFF":case`
`:case"\r":case"\u2028":case"\u2029":A();return;case"/":A(),q="comment";return;case void 0:return A(),G("eof")}if(te.isSpaceSeparator(Q)){A();return}return Bu[le]()},comment(){switch(Q){case"*":A(),q="multiLineComment";return;case"/":A(),q="singleLineComment";return}throw Z(A())},multiLineComment(){switch(Q){case"*":A(),q="multiLineCommentAsterisk";return;case void 0:throw Z(A())}A()},multiLineCommentAsterisk(){switch(Q){case"*":A();return;case"/":A(),q="default";return;case void 0:throw Z(A())}A(),q="multiLineComment"},singleLineComment(){switch(Q){case`
`:case"\r":case"\u2028":case"\u2029":A(),q="default";return;case void 0:return A(),G("eof")}A()},value(){switch(Q){case"{":case"[":return G("punctuator",A());case"n":return A(),ze("ull"),G("null",null);case"t":return A(),ze("rue"),G("boolean",!0);case"f":return A(),ze("alse"),G("boolean",!1);case"-":case"+":A()==="-"&&(ve=-1),q="sign";return;case".":V=A(),q="decimalPointLeading";return;case"0":V=A(),q="zero";return;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":V=A(),q="decimalInteger";return;case"I":return A(),ze("nfinity"),G("numeric",1/0);case"N":return A(),ze("aN"),G("numeric",NaN);case'"':case"'":We=A()==='"',V="",q="string";return}throw Z(A())},identifierNameStartEscape(){if(Q!=="u")throw Z(A());A();const t=xt();switch(t){case"$":case"_":break;default:if(!te.isIdStartChar(t))throw Gt();break}V+=t,q="identifierName"},identifierName(){switch(Q){case"$":case"_":case"‌":case"‍":V+=A();return;case"\\":A(),q="identifierNameEscape";return}if(te.isIdContinueChar(Q)){V+=A();return}return G("identifier",V)},identifierNameEscape(){if(Q!=="u")throw Z(A());A();const t=xt();switch(t){case"$":case"_":case"‌":case"‍":break;default:if(!te.isIdContinueChar(t))throw Gt();break}V+=t,q="identifierName"},sign(){switch(Q){case".":V=A(),q="decimalPointLeading";return;case"0":V=A(),q="zero";return;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":V=A(),q="decimalInteger";return;case"I":return A(),ze("nfinity"),G("numeric",ve*(1/0));case"N":return A(),ze("aN"),G("numeric",NaN)}throw Z(A())},zero(){switch(Q){case".":V+=A(),q="decimalPoint";return;case"e":case"E":V+=A(),q="decimalExponent";return;case"x":case"X":V+=A(),q="hexadecimal";return}return G("numeric",ve*0)},decimalInteger(){switch(Q){case".":V+=A(),q="decimalPoint";return;case"e":case"E":V+=A(),q="decimalExponent";return}if(te.isDigit(Q)){V+=A();return}return G("numeric",ve*Number(V))},decimalPointLeading(){if(te.isDigit(Q)){V+=A(),q="decimalFraction";return}throw Z(A())},decimalPoint(){switch(Q){case"e":case"E":V+=A(),q="decimalExponent";return}if(te.isDigit(Q)){V+=A(),q="decimalFraction";return}return G("numeric",ve*Number(V))},decimalFraction(){switch(Q){case"e":case"E":V+=A(),q="decimalExponent";return}if(te.isDigit(Q)){V+=A();return}return G("numeric",ve*Number(V))},decimalExponent(){switch(Q){case"+":case"-":V+=A(),q="decimalExponentSign";return}if(te.isDigit(Q)){V+=A(),q="decimalExponentInteger";return}throw Z(A())},decimalExponentSign(){if(te.isDigit(Q)){V+=A(),q="decimalExponentInteger";return}throw Z(A())},decimalExponentInteger(){if(te.isDigit(Q)){V+=A();return}return G("numeric",ve*Number(V))},hexadecimal(){if(te.isHexDigit(Q)){V+=A(),q="hexadecimalInteger";return}throw Z(A())},hexadecimalInteger(){if(te.isHexDigit(Q)){V+=A();return}return G("numeric",ve*Number(V))},string(){switch(Q){case"\\":A(),V+=Kr();return;case'"':if(We)return A(),G("string",V);V+=A();return;case"'":if(!We)return A(),G("string",V);V+=A();return;case`
`:case"\r":throw Z(A());case"\u2028":case"\u2029":Gr(Q);break;case void 0:throw Z(A())}V+=A()},start(){switch(Q){case"{":case"[":return G("punctuator",A())}q="value"},beforePropertyName(){switch(Q){case"$":case"_":V=A(),q="identifierName";return;case"\\":A(),q="identifierNameStartEscape";return;case"}":return G("punctuator",A());case'"':case"'":We=A()==='"',q="string";return}if(te.isIdStartChar(Q)){V+=A(),q="identifierName";return}throw Z(A())},afterPropertyName(){if(Q===":")return G("punctuator",A());throw Z(A())},beforePropertyValue(){q="value"},afterPropertyValue(){switch(Q){case",":case"}":return G("punctuator",A())}throw Z(A())},beforeArrayValue(){if(Q==="]")return G("punctuator",A());q="value"},afterArrayValue(){switch(Q){case",":case"]":return G("punctuator",A())}throw Z(A())},end(){throw Z(A())}};function G(t,e){return{type:t,value:e,line:_e,column:me}}function ze(t){for(const e of t){if(je()!==e)throw Z(A());A()}}function Kr(){switch(je()){case"b":return A(),"\b";case"f":return A(),"\f";case"n":return A(),`
`;case"r":return A(),"\r";case"t":return A(),"	";case"v":return A(),"\v";case"0":if(A(),te.isDigit(je()))throw Z(A());return"\0";case"x":return A(),Xr();case"u":return A(),xt();case`
`:case"\u2028":case"\u2029":return A(),"";case"\r":return A(),je()===`
`&&A(),"";case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":throw Z(A());case void 0:throw Z(A())}return A()}function Xr(){let t="",e=je();if(!te.isHexDigit(e)||(t+=A(),e=je(),!te.isHexDigit(e)))throw Z(A());return t+=A(),String.fromCodePoint(parseInt(t,16))}function xt(){let t="",e=4;for(;e-- >0;){const u=je();if(!te.isHexDigit(u))throw Z(A());t+=A()}return String.fromCodePoint(parseInt(t,16))}const Yr={start(){if(ie.type==="eof")throw Ie();ht()},beforePropertyName(){switch(ie.type){case"identifier":case"string":jt=ie.value,le="afterPropertyName";return;case"punctuator":Ge();return;case"eof":throw Ie()}},afterPropertyName(){if(ie.type==="eof")throw Ie();le="beforePropertyValue"},beforePropertyValue(){if(ie.type==="eof")throw Ie();ht()},beforeArrayValue(){if(ie.type==="eof")throw Ie();if(ie.type==="punctuator"&&ie.value==="]"){Ge();return}ht()},afterPropertyValue(){if(ie.type==="eof")throw Ie();switch(ie.value){case",":le="beforePropertyName";return;case"}":Ge()}},afterArrayValue(){if(ie.type==="eof")throw Ie();switch(ie.value){case",":le="beforeArrayValue";return;case"]":Ge()}},end(){}};function ht(){let t;switch(ie.type){case"punctuator":switch(ie.value){case"{":t={};break;case"[":t=[];break}break;case"null":case"boolean":case"numeric":case"string":t=ie.value;break}if(ut===void 0)ut=t;else{const e=be[be.length-1];Array.isArray(e)?e.push(t):Object.defineProperty(e,jt,{value:t,writable:!0,enumerable:!0,configurable:!0})}if(t!==null&&typeof t=="object")be.push(t),Array.isArray(t)?le="beforeArrayValue":le="beforePropertyName";else{const e=be[be.length-1];e==null?le="end":Array.isArray(e)?le="afterArrayValue":le="afterPropertyValue"}}function Ge(){be.pop();const t=be[be.length-1];t==null?le="end":Array.isArray(t)?le="afterArrayValue":le="afterPropertyValue"}function Z(t){return rt(t===void 0?`JSON5: invalid end of input at ${_e}:${me}`:`JSON5: invalid character '${xu(t)}' at ${_e}:${me}`)}function Ie(){return rt(`JSON5: invalid end of input at ${_e}:${me}`)}function Gt(){return me-=5,rt(`JSON5: invalid identifier character at ${_e}:${me}`)}function Gr(t){console.warn(`JSON5: '${xu(t)}' in strings is not valid ECMAScript; consider escaping`)}function xu(t){const e={"'":"\\'",'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","\v":"\\v","\0":"\\0","\u2028":"\\u2028","\u2029":"\\u2029"};if(e[t])return e[t];if(t<" "){const u=t.charCodeAt(0).toString(16);return"\\x"+("00"+u).substring(u.length)}return t}function rt(t){const e=new SyntaxError(t);return e.lineNumber=_e,e.columnNumber=me,e}var Zr=function(e,u,s){const l=[];let n="",o,r,i="",d;if(u!=null&&typeof u=="object"&&!Array.isArray(u)&&(s=u.space,d=u.quote,u=u.replacer),typeof u=="function")r=u;else if(Array.isArray(u)){o=[];for(const c of u){let x;typeof c=="string"?x=c:(typeof c=="number"||c instanceof String||c instanceof Number)&&(x=String(c)),x!==void 0&&o.indexOf(x)<0&&o.push(x)}}return s instanceof Number?s=Number(s):s instanceof String&&(s=String(s)),typeof s=="number"?s>0&&(s=Math.min(10,Math.floor(s)),i="          ".substr(0,s)):typeof s=="string"&&(i=s.substr(0,10)),F("",{"":e});function F(c,x){let C=x[c];switch(C!=null&&(typeof C.toJSON5=="function"?C=C.toJSON5(c):typeof C.toJSON=="function"&&(C=C.toJSON(c))),r&&(C=r.call(x,c,C)),C instanceof Number?C=Number(C):C instanceof String?C=String(C):C instanceof Boolean&&(C=C.valueOf()),C){case null:return"null";case!0:return"true";case!1:return"false"}if(typeof C=="string")return h(C);if(typeof C=="number")return String(C);if(typeof C=="object")return Array.isArray(C)?m(C):b(C)}function h(c){const x={"'":.1,'"':.2},C={"'":"\\'",'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","\v":"\\v","\0":"\\0","\u2028":"\\u2028","\u2029":"\\u2029"};let S="";for(let j=0;j<c.length;j++){const v=c[j];switch(v){case"'":case'"':x[v]++,S+=v;continue;case"\0":if(te.isDigit(c[j+1])){S+="\\x00";continue}}if(C[v]){S+=C[v];continue}if(v<" "){let O=v.charCodeAt(0).toString(16);S+="\\x"+("00"+O).substring(O.length);continue}S+=v}const _=d||Object.keys(x).reduce((j,v)=>x[j]<x[v]?j:v);return S=S.replace(new RegExp(_,"g"),C[_]),_+S+_}function b(c){if(l.indexOf(c)>=0)throw TypeError("Converting circular structure to JSON5");l.push(c);let x=n;n=n+i;let C=o||Object.keys(c),S=[];for(const j of C){const v=F(j,c);if(v!==void 0){let O=g(j)+":";i!==""&&(O+=" "),O+=v,S.push(O)}}let _;if(S.length===0)_="{}";else{let j;if(i==="")j=S.join(","),_="{"+j+"}";else{let v=`,
`+n;j=S.join(v),_=`{
`+n+j+`,
`+x+"}"}}return l.pop(),n=x,_}function g(c){if(c.length===0)return h(c);const x=String.fromCodePoint(c.codePointAt(0));if(!te.isIdStartChar(x))return h(c);for(let C=x.length;C<c.length;C++)if(!te.isIdContinueChar(String.fromCodePoint(c.codePointAt(C))))return h(c);return c}function m(c){if(l.indexOf(c)>=0)throw TypeError("Converting circular structure to JSON5");l.push(c);let x=n;n=n+i;let C=[];for(let _=0;_<c.length;_++){const j=F(String(_),c);C.push(j!==void 0?j:"null")}let S;if(C.length===0)S="[]";else if(i==="")S="["+C.join(",")+"]";else{let _=`,
`+n,j=C.join(_);S=`[
`+n+j+`,
`+x+"]"}return l.pop(),n=x,S}};const en={parse:Wr,stringify:Zr};var tn=en,$e={},Ce={},Zt;function it(){return Zt||(Zt=1,Object.defineProperty(Ce,"__esModule",{value:!0}),Ce.excelBOM=Ce.defaultCsv2JsonOptions=Ce.defaultJson2CsvOptions=Ce.errors=void 0,Ce.errors={optionsRequired:"Options were not passed and are required.",json2csv:{cannotCallOn:"Cannot call json2csv on",dataCheckFailure:"Data provided was not an array of documents.",notSameSchema:"Not all documents have the same schema."},csv2json:{cannotCallOn:"Cannot call csv2json on",dataCheckFailure:"CSV is not a string."}},Ce.defaultJson2CsvOptions={arrayIndexesAsKeys:!1,checkSchemaDifferences:!1,delimiter:{field:",",wrap:'"',eol:`
`},emptyFieldValue:void 0,escapeHeaderNestedDots:!0,excelBOM:!1,excludeKeys:[],expandNestedObjects:!0,expandArrayObjects:!1,prependHeader:!0,preventCsvInjection:!1,sortHeader:!1,trimFieldValues:!1,trimHeaderFields:!1,unwindArrays:!1,useDateIso8601Format:!1,useLocaleFormat:!1,wrapBooleans:!1},Ce.defaultCsv2JsonOptions={delimiter:{field:",",wrap:'"',eol:`
`},excelBOM:!1,preventCsvInjection:!1,trimFieldValues:!1,trimHeaderFields:!1},Ce.excelBOM="\uFEFF"),Ce}var Fe={},Me={};/**
 * @license MIT
 * doc-path <https://github.com/mrodrig/doc-path>
 * Copyright (c) 2015-present, Michael Rodrigues.
 */var eu;function wt(){if(eu)return Me;eu=1,Object.defineProperty(Me,"__esModule",{value:!0}),Me.setPath=Me.evaluatePath=void 0;function t(n,o){if(!n)return null;const{dotIndex:r,key:i,remaining:d}=s(o),F=typeof n=="object"&&o in n?n[o]:void 0,h=typeof n=="object"&&i in n?n[i]:void 0;if(r>=0&&typeof n=="object"&&!(o in n)){const{key:b}=s(d),g=parseInt(b);return Array.isArray(h)&&isNaN(g)?h.map(m=>t(m,d)):t(h,d)}else if(Array.isArray(n)){const b=parseInt(i);return o===i&&r===-1&&!isNaN(b)?h:n.map(g=>t(g,o))}else{if(r>=0&&o!==i&&typeof n=="object"&&i in n)return t(h,d);if(r===-1&&typeof n=="object"&&i in n&&!(o in n))return h}return F}Me.evaluatePath=t;function e(n,o,r){if(n){if(!o)throw new Error("No keyPath was provided.")}else throw new Error("No object was provided.");return u(n,o,r)}Me.setPath=e;function u(n,o,r){const{dotIndex:i,key:d,remaining:F}=s(o);if(o.startsWith("__proto__")||o.startsWith("constructor")||o.startsWith("prototype"))return n;if(i>=0){const h=parseInt(d);if(typeof n=="object"&&n!==null&&!(d in n)&&Array.isArray(n)&&!isNaN(h))return n[d]=n[d]??{},u(n[d],F,r),n;if(typeof n=="object"&&n!==null&&!(d in n)&&Array.isArray(n))return n.forEach(b=>u(b,o,r)),n;if(typeof n=="object"&&n!==null&&!(d in n)&&!Array.isArray(n)){const{key:b}=s(F),g=parseInt(b);if(!isNaN(g))n[d]=[];else{if(F==="")return n[o]=r,n;n[d]={}}}u(n[d],F,r)}else if(Array.isArray(n)){const h=parseInt(d);return o===d&&i===-1&&!isNaN(h)?(n[d]=r,n):(n.forEach(b=>u(b,F,r)),n)}else n[d]=r;return n}function s(n){const o=l(n);return{dotIndex:o,key:n.slice(0,o>=0?o:void 0).replace(/\\./g,"."),remaining:n.slice(o+1)}}function l(n){for(let o=0;o<n.length;o++){const r=o>0?n[o-1]:"";if(n[o]==="."&&r!=="\\")return o}return-1}return Me}var he={},xe={},tu;function un(){if(tu)return xe;tu=1,Object.defineProperty(xe,"__esModule",{value:!0}),xe.isDocumentToRecurOn=xe.flatten=xe.unique=void 0;function t(s){return[...new Set(s)]}xe.unique=t;function e(s){return[].concat(...s)}xe.flatten=e;function u(s){return typeof s=="object"&&s!==null&&!Array.isArray(s)&&Object.keys(s).length}return xe.isDocumentToRecurOn=u,xe}var At={},uu;function rn(){return uu||(uu=1,Object.defineProperty(At,"__esModule",{value:!0})),At}var ru;function nn(){return ru||(ru=1,function(t){var e=he&&he.__createBinding||(Object.create?function(g,m,c,x){x===void 0&&(x=c);var C=Object.getOwnPropertyDescriptor(m,c);(!C||("get"in C?!m.__esModule:C.writable||C.configurable))&&(C={enumerable:!0,get:function(){return m[c]}}),Object.defineProperty(g,x,C)}:function(g,m,c,x){x===void 0&&(x=c),g[x]=m[c]}),u=he&&he.__setModuleDefault||(Object.create?function(g,m){Object.defineProperty(g,"default",{enumerable:!0,value:m})}:function(g,m){g.default=m}),s=he&&he.__importStar||function(g){if(g&&g.__esModule)return g;var m={};if(g!=null)for(var c in g)c!=="default"&&Object.prototype.hasOwnProperty.call(g,c)&&e(m,g,c);return u(m,g),m},l=he&&he.__exportStar||function(g,m){for(var c in g)c!=="default"&&!Object.prototype.hasOwnProperty.call(m,c)&&e(m,g,c)};Object.defineProperty(t,"__esModule",{value:!0}),t.deepKeysFromList=t.deepKeys=void 0;const n=s(un());l(rn(),t);function o(g,m){const c=b(m);return typeof g=="object"&&g!==null?i("",g,c):[]}t.deepKeys=o;function r(g,m){const c=b(m);return g.map(x=>typeof x=="object"&&x!==null?o(x,c):[])}t.deepKeysFromList=r;function i(g,m,c){const x=Object.keys(m).map(C=>{const S=h(g,F(C,c));return c.expandNestedObjects&&n.isDocumentToRecurOn(m[C])||c.arrayIndexesAsKeys&&Array.isArray(m[C])&&m[C].length?i(S,m[C],c):c.expandArrayObjects&&Array.isArray(m[C])?d(m[C],S,c):c.ignoreEmptyArrays&&Array.isArray(m[C])&&!m[C].length?[]:S});return n.flatten(x)}function d(g,m,c){let x=r(g,c);return g.length?g.length&&n.flatten(x).length===0?[m]:(x=x.map(C=>Array.isArray(C)&&C.length===0?[m]:C.map(S=>h(m,F(S,c)))),n.unique(n.flatten(x))):c.ignoreEmptyArraysWhenExpanding?[]:[m]}function F(g,m){return m.escapeNestedDots?g.replace(/\./g,"\\."):g}function h(g,m){return g?g+"."+m:m}function b(g){return{arrayIndexesAsKeys:!1,expandNestedObjects:!0,expandArrayObjects:!1,ignoreEmptyArraysWhenExpanding:!1,escapeNestedDots:!1,ignoreEmptyArrays:!1,...g??{}}}}(he)),he}var $={},nu;function _t(){if(nu)return $;nu=1,Object.defineProperty($,"__esModule",{value:!0}),$.isInvalid=$.flatten=$.unique=$.arrayDifference=$.isError=$.isUndefined=$.isNull=$.isObject=$.isString=$.isNumber=$.unwind=$.getNCharacters=$.removeEmptyFields=$.isEmptyField=$.computeSchemaDifferences=$.isDateRepresentation=$.isStringRepresentation=$.deepCopy=$.validate=$.buildC2JOptions=$.buildJ2COptions=void 0;const t=wt(),e=it(),u=/\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}.\d{3}Z/,s=1e5;function l(D){var y,B,p;return{...e.defaultJson2CsvOptions,...D,delimiter:{field:((y=D==null?void 0:D.delimiter)==null?void 0:y.field)??e.defaultJson2CsvOptions.delimiter.field,wrap:((B=D==null?void 0:D.delimiter)==null?void 0:B.wrap)||e.defaultJson2CsvOptions.delimiter.wrap,eol:((p=D==null?void 0:D.delimiter)==null?void 0:p.eol)||e.defaultJson2CsvOptions.delimiter.eol},fieldTitleMap:Object.create({})}}$.buildJ2COptions=l;function n(D){var y,B,p;return{...e.defaultCsv2JsonOptions,...D,delimiter:{field:((y=D==null?void 0:D.delimiter)==null?void 0:y.field)??e.defaultCsv2JsonOptions.delimiter.field,wrap:((B=D==null?void 0:D.delimiter)==null?void 0:B.wrap)||e.defaultCsv2JsonOptions.delimiter.wrap,eol:((p=D==null?void 0:D.delimiter)==null?void 0:p.eol)||e.defaultCsv2JsonOptions.delimiter.eol}}}$.buildC2JOptions=n;function o(D,y,B){if(!D)throw new Error(`${B.cannotCallOn} ${D}.`);if(!y(D))throw new Error(B.dataCheckFailure);return!0}$.validate=o;function r(D){return JSON.parse(JSON.stringify(D))}$.deepCopy=r;function i(D,y){const B=D[0],p=D.length-1,R=D[p];return B===y.delimiter.wrap&&R===y.delimiter.wrap}$.isStringRepresentation=i;function d(D){return u.test(D)}$.isDateRepresentation=d;function F(D,y){return O(D,y).concat(O(y,D))}$.computeSchemaDifferences=F;function h(D){return j(D)||_(D)||D===""}$.isEmptyField=h;function b(D){return D.filter(y=>!h(y))}$.removeEmptyFields=b;function g(D,y,B){return D.substring(y,y+B)}$.getNCharacters=g;function m(D,y,B){const p=(0,t.evaluatePath)(y,B);let R=r(y);Array.isArray(p)&&p.length?p.forEach(U=>{R=r(y),D.push((0,t.setPath)(R,B,U))}):(Array.isArray(p)&&p.length===0&&(0,t.setPath)(R,B,""),D.push(R))}function c(D,y){const B=[];return D.forEach(p=>{m(B,p,y)}),B}$.unwind=c;function x(D){return!isNaN(Number(D))}$.isNumber=x;function C(D){return typeof D=="string"}$.isString=C;function S(D){return typeof D=="object"}$.isObject=S;function _(D){return D===null}$.isNull=_;function j(D){return typeof D>"u"}$.isUndefined=j;function v(D){return Object.prototype.toString.call(D)==="[object Error]"}$.isError=v;function O(D,y){return D.filter(B=>!y.includes(B))}$.arrayDifference=O;function M(D){return[...new Set(D)]}$.unique=M;function J(D){if(D.flat)return D.flat();if(D.length>s){let y=[];for(let B=0;B<D.length;B+=s)y=y.concat(...D.slice(B,B+s));return y}return D.reduce((y,B)=>y.concat(B),[])}$.flatten=J;function E(D){return D===1/0||D===-1/0}return $.isInvalid=E,$}var iu;function sn(){if(iu)return Fe;iu=1;var t=Fe&&Fe.__createBinding||(Object.create?function(i,d,F,h){h===void 0&&(h=F);var b=Object.getOwnPropertyDescriptor(d,F);(!b||("get"in b?!d.__esModule:b.writable||b.configurable))&&(b={enumerable:!0,get:function(){return d[F]}}),Object.defineProperty(i,h,b)}:function(i,d,F,h){h===void 0&&(h=F),i[h]=d[F]}),e=Fe&&Fe.__setModuleDefault||(Object.create?function(i,d){Object.defineProperty(i,"default",{enumerable:!0,value:d})}:function(i,d){i.default=d}),u=Fe&&Fe.__importStar||function(i){if(i&&i.__esModule)return i;var d={};if(i!=null)for(var F in i)F!=="default"&&Object.prototype.hasOwnProperty.call(i,F)&&t(d,i,F);return e(d,i),d};Object.defineProperty(Fe,"__esModule",{value:!0}),Fe.Json2Csv=void 0;const s=wt(),l=nn(),n=it(),o=u(_t()),r=function(i){const d=new RegExp(i.delimiter.wrap,"g"),F=/\r?\n|\r/,h=i.parseValue&&typeof i.parseValue=="function"?i.parseValue:null,b=i.expandArrayObjects&&!i.unwindArrays,g={arrayIndexesAsKeys:i.arrayIndexesAsKeys,expandNestedObjects:i.expandNestedObjects,expandArrayObjects:b,ignoreEmptyArraysWhenExpanding:b,escapeNestedDots:!0};function m(f){return(0,l.deepKeysFromList)(f,g)}function c(f){return f.length===0?[]:i.checkSchemaDifferences?x(f):o.unique(o.flatten(f))}function x(f){const L=f[0],T=f.slice(1);if(C(L,T))throw new Error(n.errors.json2csv.notSameSchema);return L}function C(f,L){return L.reduce((T,K)=>o.computeSchemaDifferences(f,K).length>0?T+1:T,0)}function S(f){return i.excludeKeys?f.filter(L=>{for(const T of i.excludeKeys){const K=T instanceof RegExp?T:new RegExp(`^${T}`);if(T===L||L.match(K))return!1}return!0}):f}function _(f){return i.sortHeader&&typeof i.sortHeader=="function"?f.sort(i.sortHeader):i.sortHeader?f.sort():f}function j(f){return i.trimHeaderFields&&(f.headerFields=f.headerFields.map(L=>L.split(".").map(T=>T.trim()).join("."))),f}function v(f){return i.prependHeader&&(f.headerFields=f.headerFields.map(function(L){return X(L)})),f}function O(f){const L=Object.keys(i.fieldTitleMap);return f.header=f.headerFields.map(function(T){let K=T;return L.includes(T)?K=i.fieldTitleMap[T]:i.escapeHeaderNestedDots||(K=K.replace(/\\\./g,".")),K}).join(i.delimiter.field),f}function M(){return i.keys?i.keys.map(f=>typeof f=="object"&&"field"in f?(i.fieldTitleMap[f.field]=f.title??f.field,f.field):f):[]}function J(){return i.keys?i.keys.flatMap(f=>typeof f=="string"?[]:f!=null&&f.wildcardMatch?f.field:[]):[]}function E(f){const L=J(),T=M(),K=m(f),W=c(K);if(i.keys){i.keys=T;const De=T.flatMap(oe=>{if(!L.includes(oe))return oe;const Ve=[],ke=new RegExp(`^${oe}`);for(const Be of W)(oe===Be||Be.match(ke))&&Ve.push(Be);return Ve});if(!i.unwindArrays){const oe=S(De);return _(oe)}}const ae=S(W);return _(ae)}function D(f,L=!1){if(i.unwindArrays){const T=f.records.length;f.headerFields.forEach(W=>{f.records=o.unwind(f.records,W)});const K=E(f.records);if(f.headerFields=K,T!==f.records.length)return D(f);if(!L)return D(f,!0);if(i.keys){const W=M();f.headerFields=S(W)}return f}return f}function y(f){return f.recordString=f.records.map(L=>{const T=p(L,f.headerFields),K=T.map(W=>{W=U(W),W=k(W);let ae=h?h(W,R):R(W);return ae=X(ae),ae});return H(K)}).join(i.delimiter.eol),f}function B(f){const L=o.removeEmptyFields(f);return!f.length||!L.length?i.emptyFieldValue||"":L.length===1?L[0]:f}function p(f,L){const T=[];return L.forEach(K=>{let W=(0,s.evaluatePath)(f,K);!o.isUndefined(i.emptyFieldValue)&&o.isEmptyField(W)?W=i.emptyFieldValue:i.expandArrayObjects&&Array.isArray(W)&&(W=B(W)),T.push(W)}),T}function R(f){const L=f instanceof Date;return f===null||Array.isArray(f)||typeof f=="object"&&!L?JSON.stringify(f):typeof f>"u"?"undefined":L&&i.useDateIso8601Format?f.toISOString():i.useLocaleFormat?f.toLocaleString():f.toString()}function U(f){return i.trimFieldValues?Array.isArray(f)?f.map(U):typeof f=="string"?f.trim():f:f}function k(f){return i.preventCsvInjection?Array.isArray(f)?f.map(k):typeof f=="string"&&!o.isNumber(f)?f.replace(/^[=+\-@\t\r]+/g,""):f:f}function X(f){const L=i.delimiter.wrap;return f.includes(i.delimiter.wrap)&&(f=f.replace(d,L+L)),(f.includes(i.delimiter.field)||f.includes(i.delimiter.wrap)||f.match(F)||i.wrapBooleans&&(f==="true"||f==="false"))&&(f=L+f+L),f}function H(f){return f.join(i.delimiter.field)}function P(f){const L=f.header,T=f.recordString;return(i.excelBOM?n.excelBOM:"")+(i.prependHeader?L+i.delimiter.eol:"")+T}function ue(f){Array.isArray(f)||(f=[f]);const L={headerFields:E(f),records:f,header:"",recordString:""},T=D(L),K=y(T),W=v(K),ae=j(W),De=O(ae);return P(De)}return{convert:ue}};return Fe.Json2Csv=r,Fe}var Ae={},su;function an(){if(su)return Ae;su=1;var t=Ae&&Ae.__createBinding||(Object.create?function(r,i,d,F){F===void 0&&(F=d);var h=Object.getOwnPropertyDescriptor(i,d);(!h||("get"in h?!i.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return i[d]}}),Object.defineProperty(r,F,h)}:function(r,i,d,F){F===void 0&&(F=d),r[F]=i[d]}),e=Ae&&Ae.__setModuleDefault||(Object.create?function(r,i){Object.defineProperty(r,"default",{enumerable:!0,value:i})}:function(r,i){r.default=i}),u=Ae&&Ae.__importStar||function(r){if(r&&r.__esModule)return r;var i={};if(r!=null)for(var d in r)d!=="default"&&Object.prototype.hasOwnProperty.call(r,d)&&t(i,r,d);return e(i,r),i};Object.defineProperty(Ae,"__esModule",{value:!0}),Ae.Csv2Json=void 0;const s=wt(),l=it(),n=u(_t()),o=function(r){const i=new RegExp(r.delimiter.wrap+r.delimiter.wrap,"g"),d=new RegExp("^"+l.excelBOM),F=r.parseValue&&typeof r.parseValue=="function"?r.parseValue:JSON.parse;function h(E){return E=j(E),r.trimHeaderFields?E.split(".").map(D=>D.trim()).join("."):E}function b(E){let D=[];if(r.headerFields)D=r.headerFields.map((y,B)=>({value:h(y),index:B}));else if(D=E[0].map((B,p)=>({value:h(B),index:p})),r.keys){const B=r.keys;D=D.filter(p=>B.includes(p.value))}return{lines:E,headerFields:D,recordLines:[]}}function g(E){return r.excelBOM?E.replace(d,""):E}function m(E){const D=[],y=E.length-1,B=r.delimiter.eol.length,p={insideWrapDelimiter:!1,parsingValue:!0,justParsedDoubleQuote:!1,startIndex:0};let R=[],U,k,X,H,P=0;for(;P<E.length;){if(U=E[P],k=P?E[P-1]:"",X=P<y?E[P+1]:"",H=n.getNCharacters(E,P,B),(H===r.delimiter.eol&&!p.insideWrapDelimiter||P===y)&&k===r.delimiter.field)H===r.delimiter.eol&&p.startIndex===P||U===r.delimiter.field?R.push(""):R.push(E.substring(p.startIndex)),R.push(""),D.push(R),R=[],p.startIndex=P+B,p.parsingValue=!0,p.insideWrapDelimiter=X===r.delimiter.wrap;else if(P===y&&U===r.delimiter.field){const ue=E.substring(p.startIndex,P);R.push(ue),R.push(""),D.push(R)}else if(P===y||H===r.delimiter.eol&&(!p.insideWrapDelimiter||p.insideWrapDelimiter&&k===r.delimiter.wrap&&!p.justParsedDoubleQuote)){const ue=P!==y||k===r.delimiter.wrap?P:void 0;R.push(E.substring(p.startIndex,ue)),D.push(R),R=[],p.startIndex=P+B,p.parsingValue=!0,p.insideWrapDelimiter=X===r.delimiter.wrap}else if(U===r.delimiter.wrap&&k===r.delimiter.field&&!p.insideWrapDelimiter&&!p.parsingValue)p.startIndex=P,p.insideWrapDelimiter=!0,p.parsingValue=!0,n.getNCharacters(E,P+1,B)===r.delimiter.eol&&(P+=r.delimiter.eol.length+1);else if(k===r.delimiter.field&&U===r.delimiter.wrap&&X===r.delimiter.eol)R.push(E.substring(p.startIndex,P-1)),p.startIndex=P,p.parsingValue=!0,p.insideWrapDelimiter=!0,p.justParsedDoubleQuote=!0,P+=1;else if((k!==r.delimiter.wrap||p.justParsedDoubleQuote&&k===r.delimiter.wrap)&&U===r.delimiter.wrap&&n.getNCharacters(E,P+1,B)===r.delimiter.eol)p.insideWrapDelimiter=!1,p.parsingValue=!1;else if(U===r.delimiter.wrap&&(P===0||n.getNCharacters(E,P-B,B)===r.delimiter.eol&&!p.insideWrapDelimiter))p.insideWrapDelimiter=!0,p.parsingValue=!0,p.startIndex=P;else if(U===r.delimiter.wrap&&X===r.delimiter.field&&p.insideWrapDelimiter)R.push(E.substring(p.startIndex,P+1)),p.startIndex=P+2,p.insideWrapDelimiter=!1,p.parsingValue=!1;else if(U===r.delimiter.wrap&&k===r.delimiter.field&&!p.insideWrapDelimiter&&p.parsingValue)R.push(E.substring(p.startIndex,P-1)),p.insideWrapDelimiter=!0,p.parsingValue=!0,p.startIndex=P;else if(U===r.delimiter.wrap&&X===r.delimiter.wrap&&P!==p.startIndex){P+=2,p.justParsedDoubleQuote=!0;continue}else U===r.delimiter.field&&k!==r.delimiter.wrap&&X!==r.delimiter.wrap&&!p.insideWrapDelimiter&&p.parsingValue?(R.push(E.substring(p.startIndex,P)),p.startIndex=P+1):U===r.delimiter.field&&k===r.delimiter.wrap&&X!==r.delimiter.wrap&&!p.parsingValue&&(p.insideWrapDelimiter=!1,p.parsingValue=!0,p.startIndex=P+1);P++,p.justParsedDoubleQuote=!1}return D}function c(E){return r.headerFields?E.recordLines=E.lines:E.recordLines=E.lines.splice(1),E}function x(E,D){const y=D[E.index];return C(y)}function C(E){const D=M(E);return!n.isError(D)&&!n.isInvalid(D)?D:E==="undefined"?void 0:E}function S(E){return r.trimFieldValues&&E!==null?E.trim():E}function _(E,D){return E.reduce((y,B)=>{const p=x(B,D);try{return(0,s.setPath)(y,B.value,p)}catch{return y}},{})}function j(E){const D=E[0],y=E.length-1,B=E[y];return D===r.delimiter.wrap&&B===r.delimiter.wrap?E.length<=2?"":E.substring(1,y):E}function v(E){return E.replace(i,r.delimiter.wrap)}function O(E){return E.recordLines.reduce((D,y)=>{y=y.map(p=>(p=j(p),p=v(p),p=S(p),p));const B=_(E.headerFields,y);return D.concat(B)},[])}function M(E){try{if(n.isStringRepresentation(E,r)&&!n.isDateRepresentation(E))return E;const D=F(E);return Array.isArray(D)?D.map(S):D}catch(D){return D}}function J(E){const D=g(E),y=m(D),B=b(y),p=c(B);return O(p)}return{convert:J}};return Ae.Csv2Json=o,Ae}var au;function on(){if(au)return $e;au=1,Object.defineProperty($e,"__esModule",{value:!0}),$e.csv2json=$e.json2csv=void 0;const t=it(),e=sn(),u=an(),s=_t();function l(o,r){const i=(0,s.buildJ2COptions)(r??{});return(0,s.validate)(o,s.isObject,t.errors.json2csv),(0,e.Json2Csv)(i).convert(o)}$e.json2csv=l;function n(o,r){const i=(0,s.buildC2JOptions)(r??{});return(0,s.validate)(o,s.isString,t.errors.csv2json),(0,u.Csv2Json)(i).convert(o)}return $e.csv2json=n,$e}var ln=on();const Qe=["v1","vX","v2021-03-25","v2021-10-21","v2022-03-07","v2025-02-19",`v${new Date().toISOString().split("T")[0]}`],[vu]=Qe.slice(-1);function bu(t){const e=ne.c(5),[u,s]=w.useState(!1);let l,n;e[0]!==t.delay?(l=()=>{const r=setTimeout(()=>s(!0),t.delay||500);return()=>clearTimeout(r)},n=[t.delay],e[0]=t.delay,e[1]=l,e[2]=n):(l=e[1],n=e[2]),w.useEffect(l,n);let o;return e[3]!==u?(o=u?a.jsx(Wu,{muted:!0,size:4}):null,e[3]=u,e[4]=o):o=e[4],o}const cn=[[_r],fr(),pr(),Cr(),Fr(),hr(),Ar(),Er(),mr(),gr(),yr(),mu(jr,{fallback:!0}),Br.of([{key:"Mod-Enter",run:()=>!0},xr,vr].flat().filter(Boolean))];function Dn(t){const e=ne.c(7);let u,s;e[0]!==t?(s=dn(t),e[0]=t,e[1]=s):s=e[1],u=s;const l=u;let n,o;e[2]!==t?(o=mu(fn(t)),e[2]=t,e[3]=o):o=e[3],n=o;const r=n;let i;return e[4]!==r||e[5]!==l?(i=[l,r],e[4]=r,e[5]=l,e[6]=i):i=e[6],i}function dn(t){const{color:e,fonts:u}=t.sanity,s=e.card.enabled,l=Tt.blue[e.dark?400:500].hex,n=Tt.gray[t.sanity.color.dark?900:100].hex;return br.theme({"&":{color:s.fg,backgroundColor:s.bg},".cm-content":{caretColor:l},".cm-editor":{fontFamily:u.code.family,fontSize:Ee(u.code.sizes[1].fontSize),lineHeight:"inherit"},".cm-cursor, .cm-dropCursor":{borderLeftColor:l},"&.cm-focused .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:n},".cm-panels":{backgroundColor:s.bg,color:s.fg},".cm-panels.cm-panels-top":{borderBottom:`2px solid ${s.border}`},".cm-panels.cm-panels-bottom":{borderTop:`2px solid ${s.border}`}},{dark:e.dark})}function fn(t){const e=t.sanity.color.base,u=t.sanity.color.syntax;return Sr.define([{tag:I.keyword,color:u.keyword},{tag:[I.propertyName,I.name,I.deleted,I.character,I.macroName],color:u.property},{tag:[I.function(I.variableName),I.labelName],color:u.function},{tag:[I.color,I.constant(I.name),I.standard(I.name)],color:u.variable},{tag:[I.definition(I.name),I.separator],color:u.constant},{tag:[I.typeName,I.className,I.number,I.changed,I.annotation,I.modifier,I.self,I.namespace],color:u.number},{tag:[I.operator,I.operatorKeyword,I.url,I.escape,I.regexp,I.link,I.special(I.string)],color:u.operator},{tag:[I.meta,I.comment],color:u.comment},{tag:I.strong,fontWeight:"bold"},{tag:I.emphasis,fontStyle:"italic"},{tag:I.strikethrough,textDecoration:"line-through"},{tag:I.heading,fontWeight:"bold",color:u.property},{tag:[I.atom,I.bool,I.special(I.variableName)],color:u.boolean},{tag:[I.processingInstruction,I.string,I.inserted],color:u.string},{tag:I.invalid,color:e.fg}])}const pn=ee.div`
  width: 100%;
  box-sizing: border-box;
  height: 100%;
  overflow: hidden;
  overflow: clip;
  position: relative;
  display: flex;

  & .cm-theme {
    width: 100%;
  }

  & .cm-editor {
    height: 100%;

    font-size: 16px;
    line-height: 21px;
  }

  & .cm-line {
    padding-left: ${({theme:t})=>Ee(t.sanity.space[3])};
  }

  & .cm-content {
    border-right-width: ${({theme:t})=>Ee(t.sanity.space[4])} !important;
    padding-top: ${({theme:t})=>Ee(t.sanity.space[5])};
  }
`,Ot=w.forwardRef((t,e)=>{const u=ne.c(7),[s]=w.useState(t.initialValue),l=Gu(),n=Dn(l),o=w.useRef(null);let r;u[0]===Symbol.for("react.memo_cache_sentinel")?(r=b=>{var c;const g=(c=o.current)==null?void 0:c.view;if(!g)return;const m=g.state.doc.toString();b!==m&&g.dispatch({changes:{from:0,to:m.length,insert:b},selection:wr.cursor(b.length)})},u[0]=r):r=u[0];const i=r;let d,F;u[1]===Symbol.for("react.memo_cache_sentinel")?(d=()=>({resetEditorContent:i}),F=[i],u[1]=d,u[2]=F):(d=u[1],F=u[2]),w.useImperativeHandle(e,d,F);let h;return u[3]!==s||u[4]!==t.onChange||u[5]!==n?(h=a.jsx(pn,{children:a.jsx(dr,{ref:o,basicSetup:!1,theme:n,extensions:cn,value:s,onChange:t.onChange})}),u[3]=s,u[4]=t.onChange,u[5]=n,u[6]=h):h=u[6],h});Ot.displayName="VisionCodeMirror";const Su=["pinnedRelease","raw","published","drafts"],Cn=["pinnedRelease"];function Et(t){return Su.includes(t)}function ou(t){return typeof t=="string"&&Cn.includes(t)}function lu({selectedPerspectiveName:t}){return typeof t<"u"}function cu({visionPerspective:t,perspectiveStack:e}){return t!=="pinnedRelease"?t:e}function Du(t,e={},u={}){const s=new URLSearchParams;s.set("query",t);for(const[l,n]of Object.entries(e))s.set(`$${l}`,JSON.stringify(n));for(const[l,n]of Object.entries(u))n&&s.set(l,`${n}`);return`?${s}`}function Fn(t){return!!t&&typeof t=="object"&&Object.prototype.toString.call(t)==="[object Object]"}const ju=En(),wu="sanityVision:";function hn(){if(ju)for(let t=0;t<localStorage.length;t++){const e=localStorage.key(t);e!=null&&e.startsWith(wu)&&localStorage.removeItem(e)}}function An(t){const e=`${wu}${t}`;let u=null;return{get:s,set:l,merge:n};function s(i,d){const F=o();return typeof F[i]>"u"?d:F[i]}function l(i,d){const F=o();return F[i]=d,localStorage.setItem(e,JSON.stringify(u)),d}function n(i){const d={...o(),...i};return localStorage.setItem(e,JSON.stringify(d)),d}function o(){return u===null&&(u=r()),u}function r(){if(!ju)return{};try{const i=JSON.parse(localStorage.getItem(e)||"{}");return Fn(i)?i:{}}catch{return{}}}}function En(){const t="lsCheck";try{return localStorage.setItem(t,t),localStorage.removeItem(t),!0}catch{return!1}}function mn(t){const e={},u={};for(const[s,l]of t.entries()){if(s[0]==="$"){e[s.slice(1)]=JSON.parse(l);continue}if(s==="perspective"){u[s]=l;continue}}return{query:t.get("query")||"",params:e,options:u}}function gn(t){return t[0]!=="v"&&t!=="other"?`v${t}`:t}function mt(t){const e=t.replace(/^v/,"").trim().toUpperCase();return e.length>0&&(e==="X"||e==="1"||/^\d{4}-\d{2}-\d{2}$/.test(e)&&!isNaN(Date.parse(e)))}function yn(t,e){try{const u=t?tn.parse(t):{};return typeof u=="object"&&u&&!Array.isArray(u)?u:{}}catch(u){return u.message=`${e("params.error.params-invalid-json")}:

${u.message.replace("JSON5:","")}`,u}}const _u=ee(we)`
  .sidebarPanes .Pane {
    overflow-y: auto;
    overflow-x: hidden;
  }

  & .Resizer {
    background: var(--card-border-color);
    opacity: 1;
    z-index: 1;
    box-sizing: border-box;
    background-clip: padding-box;
    border: solid transparent;
  }

  & .Resizer:hover {
    border-color: var(--card-shadow-ambient-color);
  }

  & .Resizer.horizontal {
    height: 11px;
    margin: -5px 0;
    border-width: 5px 0;
    cursor: row-resize;
    width: 100%;
    z-index: 4;
  }

  & .Resizer.vertical {
    width: 11px;
    margin: 0 -5px;
    border-width: 0 5px;
    cursor: col-resize;
    z-index: 2; /* To prevent the resizer from being hidden behind CodeMirror scroll area */
  }

  .Resizer.disabled {
    cursor: not-allowed;
  }

  .Resizer.disabled:hover {
    border-color: transparent;
  }
`;_u.displayName="Root";const Bn=ee(re)`
  border-bottom: 1px solid var(--card-border-color);
`,Se=ee(lr)`
  flex: 1;
`,xn=ee(Y)`
  position: relative;
`,vn=ee.a`
  cursor: pointer;
  margin-right: auto;
`,Ou=ee(Y)`
  position: absolute;
  top: 1rem;
  left: 0;
  padding: 0;
  margin: 0;
  z-index: 10;
  right: 0;

  ${Se} {
    user-select: none;
  }
`,Pu=ee(Ou)`
  // This is so its aligned with the gutters of CodeMirror
  left: 33px;
`,du=ee(re)`
  width: 100%;
  height: 100%;
  position: relative;
  flex-direction: column;
`,bn=ee(we)`
  height: 100%;
`,Sn=ee(Y)`
  position: relative;
`,jn=ee(re)`
  height: 100%;
  width: 100%;
  position: absolute;
  max-width: 100%;

  ${({$isInvalid:t})=>t&&Fu`
      &:after {
        background-color: var(--card-bg-color);
        content: '';
        position: absolute;
        top: 0;
        bottom: 0;
        left: 0;
        width: 100%;
      }
    `}
`,wn=ee(Y)`
  position: relative;
  width: 100%;
  height: 100%;
  z-index: 20;
`,_n=ee(we)`
  border-top: 1px solid var(--card-border-color);
`,On=ee(re)`
  position: relative;
`;ee(Y)`
  width: 100%;
  height: 100%;
`;const Pn=ee(we)`
  height: 100%;
  min-height: ${({theme:t})=>Ee(t.sanity.space[3]*2+t.sanity.fonts.text.sizes[2].lineHeight-t.sanity.fonts.text.sizes[2].ascenderHeight-t.sanity.fonts.text.sizes[2].descenderHeight)};
`,Rn=ee(re)`
  position: relative;
`,Nn=ee(ye)`
  transform: initial;
  &:before,
  &:after {
    content: none;
  }
  > span {
    display: flex !important;
    gap: ${({theme:t})=>Ee(t.sanity.space[3])};
    align-items: center;
  }
`,zn=ee(Y)`
  border-top: 1px solid var(--card-border-color);
`,In=`{
  
}`;function $n(t){const e=ne.c(33),{onChange:u,paramsError:s,hasValidParams:l,editorRef:n}=t,{t:o}=Oe(Pe);let r;e[0]!==t.value||e[1]!==o?(r=nt(t.value,o),e[0]=t.value,e[1]=o,e[2]=r):r=e[2];const{raw:i,error:d,parsed:F,valid:h}=r,[b,g]=w.useState(h),[m,c]=w.useState(!1);let x,C;e[3]!==d||e[4]!==m||e[5]!==b||e[6]!==u||e[7]!==F||e[8]!==i?(x=()=>{m||(u({parsed:F,raw:i,valid:b,error:d}),c(!0))},C=[d,m,b,u,F,i],e[3]=d,e[4]=m,e[5]=b,e[6]=u,e[7]=F,e[8]=i,e[9]=x,e[10]=C):(x=e[9],C=e[10]),w.useEffect(x,C);let S;e[11]!==u||e[12]!==o?(S=U=>{const k=nt(U,o);g(k.valid),u(k)},e[11]=u,e[12]=o,e[13]=S):S=e[13];const _=S;let j,v;e[14]!==_?(v=Zu(_,333),e[14]=_,e[15]=v):v=e[15],j=v;const O=j,M=l?"default":"critical";let J;e[16]!==o?(J=o("params.label"),e[16]=o,e[17]=J):J=e[17];let E;e[18]!==J?(E=a.jsx(Se,{muted:!0,children:J}),e[18]=J,e[19]=E):E=e[19];let D;e[20]!==s?(D=s&&a.jsx(Ke,{animate:!0,placement:"top",portal:!0,content:a.jsx(ye,{size:1,children:s}),children:a.jsx(Y,{padding:1,marginX:2,children:a.jsx(ye,{children:a.jsx(nr,{})})})}),e[20]=s,e[21]=D):D=e[21];let y;e[22]!==E||e[23]!==D?(y=a.jsx(Pu,{children:a.jsxs(we,{children:[E,D]})}),e[22]=E,e[23]=D,e[24]=y):y=e[24];const B=t.value||In;let p;e[25]!==n||e[26]!==O||e[27]!==B?(p=a.jsx(Ot,{ref:n,initialValue:B,onChange:O}),e[25]=n,e[26]=O,e[27]=B,e[28]=p):p=e[28];let R;return e[29]!==y||e[30]!==p||e[31]!==M?(R=a.jsxs(re,{flex:1,tone:M,"data-testid":"params-editor",children:[y,p]}),e[29]=y,e[30]=p,e[31]=M,e[32]=R):R=e[32],R}function nt(t,e){const u=yn(t,e),s=u instanceof Error?{}:u,l=u instanceof Error?u.message:void 0;return{parsed:s,raw:t,valid:!l,error:l}}function Pt(){return typeof window<"u"&&window.innerWidth>600}function Ru(t){let e=t;return e||(e=typeof window<"u"&&typeof document<"u"?document.body.getBoundingClientRect().height-60:0),{defaultSize:e/(Pt()?2:1),size:e>550?void 0:e*.4,allowResize:e>550,minSize:Math.min(170,Math.max(170,e/2)),maxSize:e>650?e*.7:e*.6}}function Mn(t){const e=ne.c(7),{visionRootRef:u}=t,[s,l]=w.useState(Vn),[n,o]=w.useState(Ln);let r;e[0]!==u.current?(r=()=>{if(!u.current)return;const F=b=>{l(Pt());const g=b==null?void 0:b[0];g&&o(Ru(g.contentRect.height))},h=new ResizeObserver(F);return h.observe(u.current),()=>{h.disconnect()}},e[0]=u.current,e[1]=r):r=e[1];let i;e[2]!==u?(i=[u],e[2]=u,e[3]=i):i=e[3],w.useEffect(r,i);let d;return e[4]!==s||e[5]!==n?(d={paneSizeOptions:n,isNarrowBreakpoint:s},e[4]=s,e[5]=n,e[6]=d):d=e[6],d}function Ln(){return Ru(void 0)}function Vn(){return Pt()}function kn(t){const e=ne.c(30),{hasValidParams:u,listenInProgress:s,queryInProgress:l,onQueryExecution:n,onListenExecution:o}=t,{t:r}=Oe(Pe);let i;e[0]!==r?(i=r("params.error.params-invalid-json"),e[0]=r,e[1]=i):i=e[1];let d;e[2]!==i?(d=a.jsx(re,{radius:4,children:a.jsx(ye,{size:1,muted:!0,children:i})}),e[2]=i,e[3]=d):d=e[3];let F;e[4]===Symbol.for("react.memo_cache_sentinel")?(F=a.jsx(re,{radius:4,children:a.jsx(ir,{keys:["Ctrl","Enter"]})}),e[4]=F):F=e[4];const h=l?Vt:kt,b=s||!u,g=l?"positive":"primary";let m;e[5]!==l||e[6]!==r?(m=r(l?"action.query-cancel":"action.query-execute"),e[5]=l,e[6]=r,e[7]=m):m=e[7];let c;e[8]!==n||e[9]!==h||e[10]!==b||e[11]!==g||e[12]!==m?(c=a.jsx(Y,{flex:1,children:a.jsx(Ke,{content:F,placement:"top",portal:!0,children:a.jsx(Le,{width:"fill",onClick:n,type:"button",icon:h,disabled:b,tone:g,text:m})})}),e[8]=n,e[9]=h,e[10]=b,e[11]=g,e[12]=m,e[13]=c):c=e[13];const x=s?Vt:kt;let C;e[14]!==s||e[15]!==r?(C=r(s?"action.listen-cancel":"action.listen-execute"),e[14]=s,e[15]=r,e[16]=C):C=e[16];const S=!u,_=s?"positive":"default";let j;e[17]!==o||e[18]!==C||e[19]!==S||e[20]!==_||e[21]!==x?(j=a.jsx(Y,{flex:1,marginLeft:3,children:a.jsx(Le,{width:"fill",onClick:o,type:"button",icon:x,text:C,mode:"ghost",disabled:S,tone:_})}),e[17]=o,e[18]=C,e[19]=S,e[20]=_,e[21]=x,e[22]=j):j=e[22];let v;e[23]!==j||e[24]!==c?(v=a.jsxs(we,{justify:"space-evenly",children:[c,j]}),e[23]=j,e[24]=c,e[25]=v):v=e[25];let O;return e[26]!==u||e[27]!==v||e[28]!==d?(O=a.jsx(zn,{children:a.jsx(re,{padding:3,paddingX:3,children:a.jsx(Ke,{content:d,placement:"top",disabled:u,portal:!0,children:v})})}),e[26]=u,e[27]=v,e[28]=d,e[29]=O):O=e[29],O}const Tn=ee(Y)`
  /* This limits the width of the popover content */
  max-width: 240px;
`,qn=ee.a`
  cursor: pointer;
  margin-right: auto;
`,Jn=ee.div`
  width: 4px;
  height: 4px;
  border-radius: 3px;
  box-shadow: 0 0 0 1px var(--card-bg-color);
  background-color: ${({tone:t})=>`var(--card-badge-${t}-dot-color)`};
`;function Un(){const t=ne.c(39),[e,u]=w.useState(!1),s=w.useRef(null),l=w.useRef(null);let n;t[0]===Symbol.for("react.memo_cache_sentinel")?(n=()=>u(Hn),t[0]=n):n=t[0];const o=n,{t:r}=Oe(Pe);let i,d;t[1]===Symbol.for("react.memo_cache_sentinel")?(i=()=>u(!1),d=()=>[s.current,l.current],t[1]=i,t[2]=d):(i=t[1],d=t[2]),ar(i,d);let F;t[3]!==r?(F=r("settings.perspectives.title"),t[3]=r,t[4]=F):F=t[4];let h;t[5]!==F?(h=a.jsx(hu,{space:2,children:a.jsx(ye,{weight:"medium",children:F})}),t[5]=F,t[6]=h):h=t[6];let b;t[7]!==r?(b=r("settings.perspectives.description"),t[7]=r,t[8]=b):b=t[8];let g;t[9]!==b?(g=a.jsx(re,{children:a.jsx(ye,{muted:!0,children:b})}),t[9]=b,t[10]=g):g=t[10];let m;t[11]!==r?(m=r("label.new"),t[11]=r,t[12]=m):m=t[12];let c;t[13]!==m?(c=a.jsx(Y,{children:a.jsx(cr,{tone:"primary",children:m})}),t[13]=m,t[14]=c):c=t[14];let x;t[15]!==r?(x=a.jsx(ye,{muted:!0,children:a.jsx(Au,{t:r,i18nKey:"settings.perspective.preview-drafts-renamed-to-drafts.description"})}),t[15]=r,t[16]=x):x=t[16];let C;t[17]!==c||t[18]!==x?(C=a.jsx(re,{children:a.jsxs(ge,{space:2,children:[c,x]})}),t[17]=c,t[18]=x,t[19]=C):C=t[19];let S;t[20]!==r?(S=null,t[20]=r,t[21]=S):S=t[21];let _;t[22]!==r?(_=r("settings.perspectives.action.docs-link"),t[22]=r,t[23]=_):_=t[23];let j;t[24]!==_?(j=a.jsx(re,{children:a.jsx(ye,{children:a.jsxs(qn,{href:"https://sanity.io/docs/perspectives",target:"_blank",children:[_," →"]})})}),t[24]=_,t[25]=j):j=t[25];let v;t[26]!==C||t[27]!==S||t[28]!==j||t[29]!==h||t[30]!==g?(v=a.jsx(Tn,{children:a.jsxs(ge,{space:4,children:[h,g,C,S,j]})}),t[26]=C,t[27]=S,t[28]=j,t[29]=h,t[30]=g,t[31]=v):v=t[31];let O;t[32]===Symbol.for("react.memo_cache_sentinel")?(O=a.jsx(Jn,{tone:"primary"}),t[32]=O):O=t[32];let M;t[33]!==e?(M=a.jsx(Le,{icon:Dr,mode:"bleed",padding:2,paddingRight:1,tone:"primary",fontSize:1,ref:s,onClick:o,selected:e,children:O}),t[33]=e,t[34]=M):M=t[34];let J;return t[35]!==e||t[36]!==v||t[37]!==M?(J=a.jsx(or,{content:v,placement:"bottom-start",portal:!0,padding:3,ref:l,open:e,children:M}),t[35]=e,t[36]=v,t[37]=M,t[38]=J):J=t[38],J}function Hn(t){return!t}const Wn=t=>{const e=ne.c(9),{pinnedPerspective:u,t:s}=t,l=typeof u.selectedPerspective=="object"?u.selectedPerspective.metadata.title:u.selectedPerspectiveName;let n;e[0]!==u||e[1]!==s?(n=lu(u)?`(${s("settings.perspectives.pinned-release-label")})`:s("settings.perspectives.pinned-release-label"),e[0]=u,e[1]=s,e[2]=n):n=e[2];const o=n;let r,i;e[3]!==o||e[4]!==l?(i=[l,o].filter(Yn),e[3]=o,e[4]=l,e[5]=i):i=e[5],r=i.join(" ");const d=r,F=!lu(u);let h;return e[6]!==F||e[7]!==d?(h=a.jsx("option",{value:"pinnedRelease",disabled:F,children:d}),e[6]=F,e[7]=d,e[8]=h):h=e[8],h};function Qn(t){const e=ne.c(64),{onChangeDataset:u,dataset:s,customApiVersion:l,apiVersion:n,onChangeApiVersion:o,datasets:r,customApiVersionElementRef:i,onCustomApiVersionChange:d,isValidApiVersion:F,onChangePerspective:h,url:b,perspective:g}=t,m=Cu(),{t:c}=Oe(Pe),x=w.useRef(null);let C;e[0]===Symbol.for("react.memo_cache_sentinel")?(C=()=>{const oe=x.current;if(oe)try{oe.select(),document.execCommand("copy")}catch{console.error("Unable to copy to clipboard :(")}},e[0]=C):C=e[0];const S=C;let _;e[1]===Symbol.for("react.memo_cache_sentinel")?(_=[1,4,8,12],e[1]=_):_=e[1];let j;e[2]!==c?(j=c("settings.dataset-label"),e[2]=c,e[3]=j):j=e[3];let v;e[4]!==j?(v=a.jsx(re,{paddingTop:2,paddingBottom:3,children:a.jsx(Se,{children:j})}),e[4]=j,e[5]=v):v=e[5];let O;e[6]!==r?(O=r.map(Xn),e[6]=r,e[7]=O):O=e[7];let M;e[8]!==s||e[9]!==u||e[10]!==O?(M=a.jsx(pt,{value:s,onChange:u,children:O}),e[8]=s,e[9]=u,e[10]=O,e[11]=M):M=e[11];let J;e[12]!==v||e[13]!==M?(J=a.jsx(Y,{padding:1,column:2,children:a.jsxs(ge,{children:[v,M]})}),e[12]=v,e[13]=M,e[14]=J):J=e[14];let E;e[15]!==c?(E=c("settings.api-version-label"),e[15]=c,e[16]=E):E=e[16];let D;e[17]!==E?(D=a.jsx(re,{paddingTop:2,paddingBottom:3,children:a.jsx(Se,{children:E})}),e[17]=E,e[18]=D):D=e[18];const y=l===!1?n:"other";let B;e[19]===Symbol.for("react.memo_cache_sentinel")?(B=Qe.map(Kn),e[19]=B):B=e[19];let p;e[20]!==c?(p=c("settings.other-api-version-label"),e[20]=c,e[21]=p):p=e[21];let R;e[22]!==p?(R=a.jsx("option",{value:"other",children:p},"other"),e[22]=p,e[23]=R):R=e[23];let U;e[24]!==o||e[25]!==y||e[26]!==R?(U=a.jsxs(pt,{"data-testid":"api-version-selector",value:y,onChange:o,children:[B,R]}),e[24]=o,e[25]=y,e[26]=R,e[27]=U):U=e[27];let k;e[28]!==U||e[29]!==D?(k=a.jsx(Y,{padding:1,column:2,children:a.jsxs(ge,{children:[D,U]})}),e[28]=U,e[29]=D,e[30]=k):k=e[30];let X;e[31]!==l||e[32]!==i||e[33]!==F||e[34]!==d||e[35]!==c?(X=l!==!1&&a.jsx(Y,{padding:1,column:2,children:a.jsxs(ge,{children:[a.jsx(re,{paddingTop:2,paddingBottom:3,children:a.jsx(Se,{textOverflow:"ellipsis",children:c("settings.custom-api-version-label")})}),a.jsx(Lt,{ref:i,value:l,onChange:d,customValidity:F?void 0:c("settings.error.invalid-api-version"),maxLength:11})]})}),e[31]=l,e[32]=i,e[33]=F,e[34]=d,e[35]=c,e[36]=X):X=e[36];let H;e[37]!==c?(H=c("settings.perspective-label"),e[37]=c,e[38]=H):H=e[38];let P;e[39]!==H?(P=a.jsx(Y,{children:a.jsx(Se,{children:H})}),e[39]=H,e[40]=P):P=e[40];let ue;e[41]===Symbol.for("react.memo_cache_sentinel")?(ue=a.jsx(Y,{children:a.jsx(Un,{})}),e[41]=ue):ue=e[41];let f;e[42]!==P?(f=a.jsx(re,{paddingBottom:1,children:a.jsxs(hu,{space:1,children:[P,ue]})}),e[42]=P,e[43]=f):f=e[43];const L=g||"default";let T;e[44]!==m||e[45]!==c?(T=Su.map(oe=>oe==="pinnedRelease"?a.jsxs(w.Fragment,{children:[a.jsx(Wn,{pinnedPerspective:m,t:c}),a.jsx("option",{value:"default",children:c("settings.perspectives.default")},"default"),a.jsx("hr",{})]},"pinnedRelease"):a.jsx("option",{children:oe},oe)),e[44]=m,e[45]=c,e[46]=T):T=e[46];let K;e[47]!==h||e[48]!==L||e[49]!==T?(K=a.jsx(pt,{value:L,onChange:h,children:T}),e[47]=h,e[48]=L,e[49]=T,e[50]=K):K=e[50];let W;e[51]!==f||e[52]!==K?(W=a.jsx(Y,{padding:1,column:2,children:a.jsxs(ge,{children:[f,K]})}),e[51]=f,e[52]=K,e[53]=W):W=e[53];let ae;e[54]!==l||e[55]!==c||e[56]!==b?(ae=typeof b=="string"?a.jsx(Y,{padding:1,flex:1,column:l===!1?6:4,children:a.jsxs(ge,{children:[a.jsx(re,{paddingTop:2,paddingBottom:3,children:a.jsxs(Se,{children:[c("query.url")," ",a.jsxs(vn,{onClick:S,children:["[",c("action.copy-url-to-clipboard"),"]"]})]})}),a.jsxs(we,{flex:1,gap:1,children:[a.jsx(Y,{flex:1,children:a.jsx(Lt,{readOnly:!0,type:"url",ref:x,value:b})}),a.jsx(Ke,{content:c("action.copy-url-to-clipboard"),children:a.jsx(Le,{"aria-label":c("action.copy-url-to-clipboard"),type:"button",mode:"ghost",icon:Xu,onClick:S})})]})]})}):a.jsx(Y,{flex:1}),e[54]=l,e[55]=c,e[56]=b,e[57]=ae):ae=e[57];let De;return e[58]!==k||e[59]!==X||e[60]!==W||e[61]!==ae||e[62]!==J?(De=a.jsx(Bn,{paddingX:3,paddingY:2,children:a.jsxs(Yu,{columns:_,children:[J,k,X,W,ae]})}),e[58]=k,e[59]=X,e[60]=W,e[61]=ae,e[62]=J,e[63]=De):De=e[63],De}function Kn(t){return a.jsx("option",{children:t},t)}function Xn(t){return a.jsx("option",{children:t},t)}function Yn(t){return typeof t<"u"}function Gn(t,e){return URL.createObjectURL(new Blob([t],{type:e}))}function Nu(t,e){return(()=>{let u="",s="";return l=>{const n=e(l);if(!(typeof n!="string"||n===""))return n===s||(s=n,u&&URL.revokeObjectURL(u),u=Gn(n,t)),u}})()}const Zn=Nu("application/json",t=>JSON.stringify(t,null,2)),ei=Nu("text/csv",t=>ln.json2csv(Array.isArray(t)?t:[t]).trim()),vt=ee(St)`
  color: ${({theme:t})=>t.sanity.color.muted.critical.enabled.fg};
`;function ti(t){const e=ne.c(7),{error:u}=t,{t:s}=Oe(Pe);if(!("details"in u))return null;const l={...u.details,...ui(u.details)};if(!l.line)return null;const n=`${l.line}
${ri(l.column,l.columnEnd)}`;let o;e[0]!==n?(o=a.jsx(vt,{size:1,children:n}),e[0]=n,e[1]=o):o=e[1];const r=`${s("query.error.line")}:   ${l.lineNumber}
${s("query.error.column")}: ${l.column}`;let i;e[2]!==r?(i=a.jsx(Y,{marginTop:4,children:a.jsx(vt,{size:1,children:r})}),e[2]=r,e[3]=i):i=e[3];let d;return e[4]!==o||e[5]!==i?(d=a.jsxs("div",{children:[o,i]}),e[4]=o,e[5]=i,e[6]=d):d=e[6],d}function ui(t){if(!t||typeof t.query!="string"||typeof t.start!="number")return{};const{query:e,start:u,end:s}=t,l=e.slice(0,u).lastIndexOf(`
`)+1,n=(e.slice(0,l).match(/\n/g)||[]).length,o=e.slice(l,e.indexOf(`
`,l)),r=u-l,i=typeof s=="number"?s-l:void 0;return{line:o,lineNumber:n,column:r,columnEnd:i}}function ri(t,e){const u="-".repeat(t),s="^".repeat(e?e-t:1);return`${u}${s}`}function ni(t){const e=ne.c(7);let u;e[0]!==t.error.message?(u=a.jsx(vt,{size:1,children:t.error.message}),e[0]=t.error.message,e[1]=u):u=e[1];let s;e[2]!==t.error?(s=a.jsx(ti,{error:t.error}),e[2]=t.error,e[3]=s):s=e[3];let l;return e[4]!==u||e[5]!==s?(l=a.jsxs(ge,{space:5,marginTop:2,children:[u,s]}),e[4]=u,e[5]=s,e[6]=l):l=e[6],l}const ii=ee.div(({theme:t})=>{const{color:e,fonts:u,space:s}=t.sanity;return Fu`
    & .json-inspector,
    & .json-inspector .json-inspector__selection {
      font-family: ${u.code.family};
      font-size: ${u.code.sizes[2].fontSize}px;
      line-height: ${u.code.sizes[2].lineHeight}px;
      color: var(--card-code-fg-color);
    }

    & .json-inspector .json-inspector__leaf {
      padding-left: ${Ee(s[4])};
    }

    & .json-inspector .json-inspector__leaf.json-inspector__leaf_root {
      padding-top: ${Ee(s[0])};
      padding-left: 0;
    }

    & .json-inspector > .json-inspector__leaf_root > .json-inspector__line > .json-inspector__key {
      display: none;
    }

    & .json-inspector .json-inspector__line {
      display: block;
      position: relative;
      cursor: default;
    }

    & .json-inspector .json-inspector__line::after {
      content: '';
      position: absolute;
      top: 0;
      left: -200px;
      right: -50px;
      bottom: 0;
      z-index: -1;
      pointer-events: none;
    }

    & .json-inspector .json-inspector__line:hover::after {
      background: var(--card-code-bg-color);
    }

    & .json-inspector .json-inspector__leaf_composite > .json-inspector__line {
      cursor: pointer;
    }

    & .json-inspector .json-inspector__leaf_composite > .json-inspector__line::before {
      content: '▸ ';
      margin-left: calc(0px - ${Ee(s[4])});
      font-size: ${u.code.sizes[2].fontSize}px;
      line-height: ${u.code.sizes[2].lineHeight}px;
    }

    &
      .json-inspector
      .json-inspector__leaf_expanded.json-inspector__leaf_composite
      > .json-inspector__line::before {
      content: '▾ ';
      font-size: ${u.code.sizes[2].fontSize}px;
      line-height: ${u.code.sizes[2].lineHeight}px;
    }

    & .json-inspector .json-inspector__radio,
    & .json-inspector .json-inspector__flatpath {
      display: none;
    }

    & .json-inspector .json-inspector__value {
      margin-left: ${Ee(s[4]/2)};
    }

    &
      .json-inspector
      > .json-inspector__leaf_root
      > .json-inspector__line
      > .json-inspector__key
      + .json-inspector__value {
      margin: 0;
    }

    & .json-inspector .json-inspector__key {
      color: ${e.syntax.property};
    }

    & .json-inspector .json-inspector__value_helper,
    & .json-inspector .json-inspector__value_null {
      color: ${e.syntax.constant};
    }

    & .json-inspector .json-inspector__not-found {
      padding-top: ${Ee(s[2])};
    }

    & .json-inspector .json-inspector__value_string {
      color: ${e.syntax.string};
      word-break: break-word;
    }

    & .json-inspector .json-inspector__value_boolean {
      color: ${e.syntax.boolean};
    }

    & .json-inspector .json-inspector__value_number {
      color: ${e.syntax.number};
    }

    & .json-inspector .json-inspector__show-original {
      display: inline-block;
      padding: 0 6px;
      cursor: pointer;
    }

    & .json-inspector .json-inspector__show-original:hover {
      color: inherit;
    }

    & .json-inspector .json-inspector__show-original::before {
      content: '↔';
    }

    & .json-inspector .json-inspector__show-original:hover::after {
      content: ' expand';
    }
  `}),bt=new rr({maxSize:5e4});function fu(t){const e=ne.c(7),{data:u,datasetName:s}=t,l=er();if(zu(u)||Array.isArray(u)){const r=l===s?si:void 0;let i;return e[0]!==u||e[1]!==r?(i=a.jsx(ii,{children:a.jsx(tr,{data:u,search:!1,isExpanded:ai,onClick:oi,interactiveLabel:r})}),e[0]=u,e[1]=r,e[2]=i):i=e[2],i}let n;e[3]!==u?(n=JSON.stringify(u),e[3]=u,e[4]=n):n=e[4];let o;return e[5]!==n?(o=a.jsx(St,{language:"json",children:n}),e[5]=n,e[6]=o):o=e[6],o}function si(t){const e=ne.c(5);if(t.isKey||!t.keypath.endsWith("_id")&&!t.keypath.endsWith("_ref"))return null;let u;e[0]!==t.value?(u={id:t.value},e[0]=t.value,e[1]=u):u=e[1];let s;e[2]===Symbol.for("react.memo_cache_sentinel")?(s=a.jsx(sr,{}),e[2]=s):s=e[2];let l;return e[3]!==u?(l=a.jsx(ur,{intent:"edit",params:u,children:s}),e[3]=u,e[4]=l):l=e[4],l}function ai(t,e){const u=bt.get(t);if(typeof u=="boolean")return u;const s=t.split(".",4);return s.length===4?!1:Array.isArray(e)?!0:zu(e)&&!s.some(l=>ci(l))}function oi(t){const{path:e}=t,u=bt.get(e);u!==void 0&&bt.set(e,!u)}function zu(t){return t!==null&&typeof t=="object"&&!Array.isArray(t)}const li=/^\d+$/;function ci(t,e=10){return li.test(t)&&parseInt(t,10)>e}function Di(t){return t.preventDefault()}function di(t){const e=ne.c(9),{blobUrl:u}=t,{t:s}=Oe(Pe),l=!u,n=l?void 0:"query-result.csv",o=l?Di:void 0;let r;e[0]!==u||e[1]!==l||e[2]!==n||e[3]!==o?(r=a.jsx(Le,{as:"a",disabled:l,download:n,href:u,icon:Eu,mode:"ghost",onClick:o,text:"CSV",tone:"default"}),e[0]=u,e[1]=l,e[2]=n,e[3]=o,e[4]=r):r=e[4];const i=r;let d;return e[5]!==i||e[6]!==l||e[7]!==s?(d=l?a.jsx(Ke,{content:s("result.save-result-as-csv.not-csv-encodable"),placement:"top",children:i}):i,e[5]=i,e[6]=l,e[7]=s,e[8]=d):d=e[8],d}function fi(t){const e=ne.c(2),{blobUrl:u}=t;let s;return e[0]!==u?(s=a.jsx(Le,{as:"a",download:"query-result.json",href:u,icon:Eu,mode:"ghost",text:"JSON",tone:"default"}),e[0]=u,e[1]=s):s=e[1],s}function pi(t){const e=ne.c(67),{error:u,queryInProgress:s,queryResult:l,listenInProgress:n,listenMutations:o,dataset:r,queryTime:i,e2eTime:d}=t,{t:F}=Oe(Pe),h=!u&&!s&&typeof l<"u";let b;e[0]!==h||e[1]!==l?(b=h?Zn(l):"",e[0]=h,e[1]=l,e[2]=b):b=e[2];const g=b;let m;e[3]!==h||e[4]!==l?(m=h?ei(l):"",e[3]=h,e[4]=l,e[5]=m):m=e[5];const c=m,x=u?"critical":"default",C=!!u;let S;e[6]!==F?(S=F("result.label"),e[6]=F,e[7]=S):S=e[7];let _;e[8]!==S?(_=a.jsx(Ou,{children:a.jsx(Y,{marginLeft:3,children:a.jsx(Se,{muted:!0,children:S})})}),e[8]=S,e[9]=_):_=e[9];let j;e[10]!==n||e[11]!==o||e[12]!==s?(j=(s||n&&o.length===0)&&a.jsx(Y,{marginTop:3,children:a.jsx(bu,{})}),e[10]=n,e[11]=o,e[12]=s,e[13]=j):j=e[13];let v;e[14]!==u?(v=u&&a.jsx(ni,{error:u}),e[14]=u,e[15]=v):v=e[15];let O;e[16]!==r||e[17]!==h||e[18]!==l?(O=h&&a.jsx(fu,{data:l,datasetName:r}),e[16]=r,e[17]=h,e[18]=l,e[19]=O):O=e[19];let M;e[20]!==r||e[21]!==n||e[22]!==o?(M=n&&o.length>0&&a.jsx(fu,{data:o,datasetName:r}),e[20]=r,e[21]=n,e[22]=o,e[23]=M):M=e[23];let J;e[24]!==M||e[25]!==j||e[26]!==v||e[27]!==O?(J=a.jsxs(Y,{padding:3,paddingTop:5,children:[j,v,O,M]}),e[24]=M,e[25]=j,e[26]=v,e[27]=O,e[28]=J):J=e[28];let E;e[29]!==J||e[30]!==_?(E=a.jsxs(wn,{overflow:"auto",children:[_,J]}),e[29]=J,e[30]=_,e[31]=E):E=e[31];let D;e[32]!==E||e[33]!==x||e[34]!==C?(D=a.jsx(Sn,{flex:1,children:a.jsx(jn,{flex:1,overflow:"hidden",tone:x,$isInvalid:C,children:E})}),e[32]=E,e[33]=x,e[34]=C,e[35]=D):D=e[35];let y;e[36]===Symbol.for("react.memo_cache_sentinel")?(y=["column","column","row"],e[36]=y):y=e[36];let B;e[37]!==F?(B=F("result.execution-time-label"),e[37]=F,e[38]=B):B=e[38];let p;e[39]!==i||e[40]!==F?(p=typeof i=="number"?`${i}ms`:F("result.timing-not-applicable"),e[39]=i,e[40]=F,e[41]=p):p=e[41];let R;e[42]!==B||e[43]!==p?(R=a.jsx(Y,{children:a.jsxs(ye,{muted:!0,children:[B,":"," ",p]})}),e[42]=B,e[43]=p,e[44]=R):R=e[44];let U;e[45]!==F?(U=F("result.end-to-end-time-label"),e[45]=F,e[46]=U):U=e[46];let k;e[47]!==d||e[48]!==F?(k=typeof d=="number"?`${d}ms`:F("result.timing-not-applicable"),e[47]=d,e[48]=F,e[49]=k):k=e[49];let X;e[50]!==U||e[51]!==k?(X=a.jsx(Y,{marginLeft:4,children:a.jsxs(ye,{muted:!0,children:[U,":"," ",k]})}),e[50]=U,e[51]=k,e[52]=X):X=e[52];let H;e[53]!==R||e[54]!==X?(H=a.jsx(On,{paddingX:4,paddingY:3,sizing:"border",children:a.jsxs(Pn,{align:"center",children:[R,X]})}),e[53]=R,e[54]=X,e[55]=H):H=e[55];let P;e[56]!==c||e[57]!==h||e[58]!==g||e[59]!==F?(P=h&&a.jsx(Rn,{paddingX:4,paddingY:3,sizing:"border",children:a.jsx(Nn,{muted:!0,children:a.jsx(Au,{components:{SaveResultButtons:()=>a.jsxs(a.Fragment,{children:[a.jsx(fi,{blobUrl:g}),a.jsx(di,{blobUrl:c})]})},i18nKey:"result.save-result-as-format",t:F})})}),e[56]=c,e[57]=h,e[58]=g,e[59]=F,e[60]=P):P=e[60];let ue;e[61]!==H||e[62]!==P?(ue=a.jsxs(_n,{justify:"space-between",direction:y,children:[H,P]}),e[61]=H,e[62]=P,e[63]=ue):ue=e[63];let f;return e[64]!==D||e[65]!==ue?(f=a.jsxs(bn,{direction:"column","data-testid":"vision-result",children:[D,ue]}),e[64]=D,e[65]=ue,e[66]=f):f=e[66],f}function Ci(t,e){return!t||!e?!1:t===e||!!(t.compareDocumentPosition(e)&16)}const Fi=/\.(?:api|apicdn)\.sanity\.io\/(vX|v1|v\d{4}-\d\d-\d\d)\/.*?(?:query|listen)\/(.*?)\?(.*)/,hi=t=>Mt("ctrl+enter",t)||Mt("mod+enter",t);function Ai(t){const{datasets:e,config:u,projectId:s,defaultDataset:l}=t,n=Qu(),{t:o}=Oe(Pe),{perspectiveStack:r}=Cu(),i=gn(`${u.defaultApiVersion}`),d=w.useRef(null),F=w.useRef(null),h=w.useRef(null),b=w.useRef(null),g=w.useRef(void 0),m=w.useRef(void 0),[c]=w.useState(()=>An(s||"default")),{storedDataset:x,storedApiVersion:C,storedQuery:S,storedParams:_,storedPerspective:j}=w.useMemo(()=>({storedDataset:c.get("dataset",l),storedApiVersion:c.get("apiVersion",i),storedQuery:c.get("query",""),storedParams:c.get("params",`{
  
}`),storedPerspective:c.get("perspective",void 0)}),[l,i,c]),[v,O]=w.useState(()=>e.includes(x)?x:e.includes(l)?l:e[0]),[M,J]=w.useState(()=>Qe.includes(C)?C:vu),[E,D]=w.useState(()=>Qe.includes(C)?!1:C),[y,B]=w.useState(j||"raw"),p=E?mt(E):!0,[R,U]=w.useState(void 0),[k,X]=w.useState(()=>typeof S=="string"?S:""),[H,P]=w.useState(()=>nt(_,o)),[ue,f]=w.useState(void 0),[L,T]=w.useState([]),[K,W]=w.useState(void 0),[ae,De]=w.useState(void 0),[oe,Ve]=w.useState(void 0),[ke,Be]=w.useState(!1),[Xe,Ye]=w.useState(!1),{paneSizeOptions:Te,isNarrowBreakpoint:st}=Mn({visionRootRef:h}),Rt=pu({apiVersion:p&&E?E:M}),Ue=w.useMemo(()=>Rt.withConfig({apiVersion:p&&E?E:M,perspective:cu({visionPerspective:y,perspectiveStack:r}),dataset:v,allowReconfigure:!0}),[r,y,E,M,v,Rt,p]),qe=w.useCallback(()=>{g.current&&(g.current.unsubscribe(),g.current=void 0)},[]),Re=w.useCallback(()=>{m.current&&(m.current.unsubscribe(),m.current=void 0)},[]),ce=w.useCallback(N=>{if(ke){qe(),Re(),Be(!1);return}const z={query:(N==null?void 0:N.query)||k,dataset:(N==null?void 0:N.dataset)||v,params:nt(JSON.stringify((N==null?void 0:N.params)||H.parsed,null,2),o),perspective:cu({visionPerspective:(N==null?void 0:N.perspective)||y,perspectiveStack:r}),apiVersion:(N==null?void 0:N.apiVersion)||(E&&p?E:M)};if(c.set("query",z.query),c.set("params",z.params.raw),Re(),Be(!z.params.error&&!!z.query),Ye(!1),T([]),W(z.params.error?new Error(z.params.error):void 0),f(void 0),De(void 0),Ve(void 0),z.params.error)return;const fe={perspective:z.perspective??[]},Je=Ue.withConfig({apiVersion:z.apiVersion,dataset:z.dataset,perspective:z.perspective}),ct=Je.getUrl(Je.getDataUrl("query",Du(z.query,z.params.parsed,fe)));U(ct);const pe=Date.now();g.current=Je.observable.fetch(z.query,z.params.parsed,{filterResponse:!1,tag:"vision"}).subscribe({next:Ne=>{De(Ne.ms),Ve(Date.now()-pe),f(Ne.result),Be(!1),W(void 0)},error:Ne=>{W(Ne),Be(!1)}})},[ke,k,v,H.parsed,o,y,r,E,p,M,c,Re,Ue,qe]),at=w.useCallback(N=>{N!==void 0&&!Et(N)||(B(N),c.set("perspective",N),ce({perspective:N}))},[c,ce]),Iu=w.useCallback(N=>{const z=N.target.value;c.set("dataset",z),O(z),ce({dataset:z})},[c,ce]),$u=w.useCallback(N=>{var fe;const z=N.target.value;if((z==null?void 0:z.toLowerCase())==="other"){D("v"),(fe=b.current)==null||fe.focus();return}J(z),D(!1),c.set("apiVersion",z),ce({apiVersion:z})},[c,ce]),Mu=w.useCallback(N=>{const z=N.target.value||"";D(z||"v"),mt(z)&&(J(z),c.set("apiVersion",z),ce({apiVersion:z}))},[c,ce]),Lu=w.useCallback(N=>{const z=N.target.value;at(z==="default"?void 0:z)},[at]),Nt=w.useCallback(N=>{N.type==="mutation"&&T(z=>z.length===50?[N,...z.slice(0,49)]:[N,...z])},[]),Vu=w.useCallback(()=>{if(Xe){Re(),Ye(!1);return}const N=Ue.getDataUrl("listen",Du(k,H.parsed,{})),z=!H.error&&k.trim().length>0;c.set("query",k),c.set("params",H.raw),qe(),U(N),T([]),Be(!1),f(void 0),Ye(z),W(H.error?new Error(H.error):void 0),De(void 0),Ve(void 0),z&&(m.current=Ue.listen(k,H.parsed,{events:["mutation","welcome"],includeAllVersions:!0}).subscribe({next:Nt,error:fe=>{W(fe),Ye(!1)}}))},[Xe,H,k,c,qe,Nt,Re,Ue]),ku=w.useCallback(N=>{P(N),c.set("params",N.raw)},[c]),ot=w.useCallback(N=>{const z=h.current&&Ci(h.current,N.target);hi(N)&&z&&H.valid&&(ce(),N.preventDefault(),N.stopPropagation())},[H.valid,ce]),lt=w.useCallback(N=>{var It,$t;if(!N.clipboardData)return;const z=N.clipboardData.getData("text/plain").match(Fi);if(!z)return;const[,fe,Je,ct]=z;let pe;try{const dt=new URLSearchParams(ct);pe=mn(dt)}catch(dt){console.warn("Error while trying to parse API URL: ",dt.message);return}let Ne,Dt;mt(fe)&&(Qe.includes(fe)?(Ne=fe,Dt=!1):Dt=fe);const zt=Et(pe.options.perspective)&&!ou(pe.options.perspective)?pe.options.perspective:void 0;zt&&(!Et(pe.options.perspective)||ou(pe.options.perspective))&&n.push({closable:!0,id:"vision-paste-unsupported-perspective",status:"warning",title:'Perspective in pasted url is currently not supported. Falling back to "raw"'});const se={query:pe.query,params:pe.params,rawParams:JSON.stringify(pe.params,null,2),dataset:e.includes(Je)?Je:v,apiVersion:Ne||M,customApiVersion:Dt,perspective:zt||y};N.preventDefault(),O(se.dataset),X(se.query),P({parsed:se.params,raw:se.rawParams,valid:!0,error:void 0}),J(se.apiVersion),se.customApiVersion&&D(se.customApiVersion),B(se.perspective),(It=d.current)==null||It.resetEditorContent(se.query),($t=F.current)==null||$t.resetEditorContent(se.rawParams),c.merge({query:se.query,params:se.rawParams,dataset:se.dataset,apiVersion:se.customApiVersion||se.apiVersion,perspective:se.perspective}),ce(se),n.push({closable:!0,id:"vision-paste",status:"info",title:"Parsed URL to query"})},[e,v,M,y,c,n,ce]);w.useEffect(()=>(window.document.addEventListener("paste",lt),window.document.addEventListener("keydown",ot),()=>{window.document.removeEventListener("paste",lt),window.document.removeEventListener("keydown",ot)}),[ot,lt]),w.useEffect(()=>()=>{qe(),Re()},[qe,Re]);const Tu=Ku(N=>{N.length>0&&at("pinnedRelease")});return w.useEffect(()=>{Tu(r)},[r]),a.jsxs(_u,{direction:"column",height:"fill",ref:h,sizing:"border",overflow:"hidden","data-testid":"vision-root",children:[a.jsx(Qn,{apiVersion:M,customApiVersion:E,dataset:v,datasets:e,onChangeDataset:Iu,onChangeApiVersion:$u,customApiVersionElementRef:b,onCustomApiVersionChange:Mu,isValidApiVersion:p,onChangePerspective:Lu,url:R,perspective:y}),a.jsx(xn,{flex:"auto",children:a.jsxs(Qt,{split:st?"vertical":"horizontal",minSize:280,defaultSize:400,maxSize:-400,children:[a.jsx(Y,{height:"stretch",flex:1,children:a.jsxs(Qt,{className:"sidebarPanes",split:"horizontal",defaultSize:st?Te.defaultSize:Te.minSize,size:Te.size,allowResize:Te.allowResize,minSize:st?Te.minSize:100,maxSize:Te.maxSize,primary:"first",children:[a.jsx(du,{display:"flex","data-testid":"vision-query-editor",children:a.jsxs(Y,{flex:1,children:[a.jsx(Pu,{children:a.jsx(we,{children:a.jsx(Se,{muted:!0,children:o("query.label")})})}),a.jsx(Ot,{initialValue:k,onChange:X,ref:d})]})}),a.jsxs(du,{display:"flex",children:[a.jsx($n,{value:H.raw,onChange:ku,paramsError:H.error,hasValidParams:H.valid,editorRef:F}),a.jsx(kn,{hasValidParams:H.valid,queryInProgress:ke,listenInProgress:Xe,onQueryExecution:ce,onListenExecution:Vu})]})]})}),a.jsx(pi,{error:K,queryInProgress:ke,queryResult:ue,listenInProgress:Xe,listenMutations:L,dataset:v,queryTime:ae,e2eTime:oe})]})})]})}function Ei(t){const e=ne.c(7);let u;e[0]!==t?(u=t.config(),e[0]=t,e[1]=u):u=e[1];const s=u.projectId,[l,n]=w.useState();let o;e[2]!==t.observable.datasets?(o=()=>{const i=t.observable.datasets.list().subscribe({next:d=>n(d.map(mi)),error:d=>n(d)});return()=>i.unsubscribe()},e[2]=t.observable.datasets,e[3]=o):o=e[3];let r;return e[4]!==t||e[5]!==s?(r=[t,s],e[4]=t,e[5]=s,e[6]=r):r=e[6],w.useEffect(o,r),l||void 0}function mi(t){return t.name}function gi(t){const e=ne.c(15),u=Ei(t.client);if(!u){let F;return e[0]===Symbol.for("react.memo_cache_sentinel")?(F=a.jsx(we,{align:"center",height:"fill",justify:"center",children:a.jsx(bu,{})}),e[0]=F):F=e[0],F}let s;e[1]!==u||e[2]!==t.client?(s=u instanceof Error?[t.client.config().dataset||"production"]:u,e[1]=u,e[2]=t.client,e[3]=s):s=e[3];const l=s;let n;e[4]!==t.client?(n=t.client.config(),e[4]=t.client,e[5]=n):n=e[5];const o=n.projectId;let r;e[6]!==l||e[7]!==t.client||e[8]!==t.config.defaultDataset?(r=t.config.defaultDataset||t.client.config().dataset||l[0],e[6]=l,e[7]=t.client,e[8]=t.config.defaultDataset,e[9]=r):r=e[9];const i=r;let d;return e[10]!==l||e[11]!==i||e[12]!==o||e[13]!==t?(d=w.createElement(Ai,{...t,key:o,datasets:l,projectId:o,defaultDataset:i}),e[10]=l,e[11]=i,e[12]=o,e[13]=t,e[14]=d):d=e[14],d}class yi extends w.Component{constructor(u){super(u);ft(this,"handleRetryRender",()=>this.setState(u=>({error:null,numRetries:u.numRetries+1})));ft(this,"handleRetryWithCacheClear",()=>{hn(),this.handleRetryRender()});this.state={error:null,numRetries:0}}static getDerivedStateFromError(u){return{error:u instanceof Error?u.message:`${u}`}}render(){if(!this.state.error)return this.props.children;const u=this.state.error,s=this.state.numRetries>0;return a.jsx(re,{height:"fill",overflow:"auto",paddingY:[4,5,6,7],paddingX:4,sizing:"border",tone:"critical",children:a.jsx(Uu,{width:3,children:a.jsxs(ge,{space:4,children:[a.jsx("div",{children:a.jsx(Le,{onClick:s?this.handleRetryWithCacheClear:this.handleRetryRender,text:s?"Clear cache and retry":"Retry",tone:"default"})}),a.jsx(Hu,{children:"An error occurred"}),a.jsx(re,{border:!0,radius:2,overflow:"auto",padding:4,tone:"inherit",children:a.jsx(ge,{space:4,children:u&&a.jsx(St,{size:1,children:a.jsxs("strong",{children:["Error: ",u]})})})})]})})})}}function ji(t){const e=ne.c(6);let u;e[0]===Symbol.for("react.memo_cache_sentinel")?(u={apiVersion:"1"},e[0]=u):u=e[0];const s=pu(u);let l;e[1]!==t.tool.options?(l={defaultApiVersion:vu,...t.tool.options},e[1]=t.tool.options,e[2]=l):l=e[2];const n=l;let o;return e[3]!==s||e[4]!==n?(o=a.jsx(yi,{children:a.jsx(gi,{client:s,config:n})}),e[3]=s,e[4]=n,e[5]=o):o=e[5],o}export{ji as default};
