const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["static/index-On5ei4O0.js","static/index-CsL39mNR.js","static/index-nrk65WYo.js","static/sanity-BUQh8jrI.js","static/sanity-BS3z5SrM.css","static/index-R5dDCgwp.js","static/index-M9ila_rt.js","static/index-BhwN-UNd.js","static/index-_96KVtAH.js","static/index-DY0GX1r_.js","static/index-Q-Lhby4F.js","static/sass-BR7ksiGk.js","static/css-Bt2UjfAg.js"])))=>i.map(i=>d[i]);
import{r as l,aW as C,j as q,K as A,aX as m,O as G,aY as J,af as c}from"./sanity-BUQh8jrI.js";import{E as h,H as W,s as K,S as Q,R as X,t as i,l as Y,o as I,D as _,p as u}from"./index-nrk65WYo.js";var U=e=>{var{theme:n,settings:t={},styles:r=[]}=e,o={".cm-gutters":{}},a={};t.background&&(a.backgroundColor=t.background),t.backgroundImage&&(a.backgroundImage=t.backgroundImage),t.foreground&&(a.color=t.foreground),t.fontSize&&(a.fontSize=t.fontSize),(t.background||t.foreground)&&(o["&"]=a),t.fontFamily&&(o["&.cm-editor .cm-scroller"]={fontFamily:t.fontFamily}),t.gutterBackground&&(o[".cm-gutters"].backgroundColor=t.gutterBackground),t.gutterForeground&&(o[".cm-gutters"].color=t.gutterForeground),t.gutterBorder&&(o[".cm-gutters"].borderRightColor=t.gutterBorder),t.caret&&(o[".cm-content"]={caretColor:t.caret},o[".cm-cursor, .cm-dropCursor"]={borderLeftColor:t.caret});var s={};t.gutterActiveForeground&&(s.color=t.gutterActiveForeground),t.lineHighlight&&(o[".cm-activeLine"]={backgroundColor:t.lineHighlight},s.backgroundColor=t.lineHighlight),o[".cm-activeLineGutter"]=s,t.selection&&(o["&.cm-focused .cm-selectionBackground, & .cm-line::selection, & .cm-selectionLayer .cm-selectionBackground, .cm-content ::selection"]={background:t.selection+" !important"}),t.selectionMatch&&(o["& .cm-selectionMatch"]={backgroundColor:t.selectionMatch});var d=h.theme(o,{dark:n==="dark"}),g=W.define(r),y=[d,K(g)];return y};const Z=[{name:"groq",loader:()=>c(async()=>{const{javascriptLanguage:e}=await import("./index-On5ei4O0.js");return{javascriptLanguage:e}},__vite__mapDeps([0,1,2,3,4])).then(({javascriptLanguage:e})=>e)},{name:"javascript",loader:()=>c(async()=>{const{javascript:e}=await import("./index-On5ei4O0.js");return{javascript:e}},__vite__mapDeps([0,1,2,3,4])).then(({javascript:e})=>e({jsx:!1}))},{name:"jsx",loader:()=>c(async()=>{const{javascript:e}=await import("./index-On5ei4O0.js");return{javascript:e}},__vite__mapDeps([0,1,2,3,4])).then(({javascript:e})=>e({jsx:!0}))},{name:"typescript",loader:()=>c(async()=>{const{javascript:e}=await import("./index-On5ei4O0.js");return{javascript:e}},__vite__mapDeps([0,1,2,3,4])).then(({javascript:e})=>e({jsx:!1,typescript:!0}))},{name:"tsx",loader:()=>c(async()=>{const{javascript:e}=await import("./index-On5ei4O0.js");return{javascript:e}},__vite__mapDeps([0,1,2,3,4])).then(({javascript:e})=>e({jsx:!0,typescript:!0}))},{name:"php",loader:()=>c(async()=>{const{php:e}=await import("./index-R5dDCgwp.js");return{php:e}},__vite__mapDeps([5,1,2,3,4,6,0])).then(({php:e})=>e())},{name:"sql",loader:()=>c(async()=>{const{sql:e}=await import("./index-BhwN-UNd.js");return{sql:e}},__vite__mapDeps([7,2,3,4,1])).then(({sql:e})=>e())},{name:"mysql",loader:()=>c(async()=>{const{sql:e,MySQL:n}=await import("./index-BhwN-UNd.js");return{sql:e,MySQL:n}},__vite__mapDeps([7,2,3,4,1])).then(({sql:e,MySQL:n})=>e({dialect:n}))},{name:"json",loader:()=>c(async()=>{const{json:e}=await import("./index-_96KVtAH.js");return{json:e}},__vite__mapDeps([8,1,2,3,4])).then(({json:e})=>e())},{name:"markdown",loader:()=>c(async()=>{const{markdown:e}=await import("./index-DY0GX1r_.js");return{markdown:e}},__vite__mapDeps([9,2,3,4,6,1,0])).then(({markdown:e})=>e())},{name:"java",loader:()=>c(async()=>{const{java:e}=await import("./index-Q-Lhby4F.js");return{java:e}},__vite__mapDeps([10,1,2,3,4])).then(({java:e})=>e())},{name:"html",loader:()=>c(async()=>{const{html:e}=await import("./index-M9ila_rt.js");return{html:e}},__vite__mapDeps([6,1,2,3,4,0])).then(({html:e})=>e())},{name:"csharp",loader:()=>c(async()=>{const{csharp:e}=await import("./clike-ZQV1NlO2.js");return{csharp:e}},[]).then(({csharp:e})=>u.define(e))},{name:"sh",loader:()=>c(async()=>{const{shell:e}=await import("./shell-CjFT_Tl9.js");return{shell:e}},[]).then(({shell:e})=>u.define(e))},{name:"css",loader:()=>c(async()=>{const{css:e}=await import("./css-Bt2UjfAg.js");return{css:e}},[]).then(({css:e})=>u.define(e))},{name:"scss",loader:()=>c(async()=>{const{css:e}=await import("./css-Bt2UjfAg.js");return{css:e}},[]).then(({css:e})=>u.define(e))},{name:"sass",loader:()=>c(async()=>{const{sass:e}=await import("./sass-BR7ksiGk.js");return{sass:e}},__vite__mapDeps([11,12])).then(({sass:e})=>u.define(e))},{name:"ruby",loader:()=>c(async()=>{const{ruby:e}=await import("./ruby-B2Rjki9n.js");return{ruby:e}},[]).then(({ruby:e})=>u.define(e))},{name:"python",loader:()=>c(async()=>{const{python:e}=await import("./python-jWMSN8OU.js");return{python:e}},[]).then(({python:e})=>u.define(e))},{name:"xml",loader:()=>c(async()=>{const{xml:e}=await import("./xml-BFMHta2a.js");return{xml:e}},[]).then(({xml:e})=>u.define(e))},{name:"yaml",loader:()=>c(async()=>{const{yaml:e}=await import("./yaml-DsCXHVTH.js");return{yaml:e}},[]).then(({yaml:e})=>u.define(e))},{name:"golang",loader:()=>c(async()=>{const{go:e}=await import("./go-CTD25R5P.js");return{go:e}},[]).then(({go:e})=>u.define(e))},{name:"text",loader:()=>{}},{name:"batch",loader:()=>{}}];function D(e){return e.tone!=="neutral"&&e.tone!=="suggest"?e.tone:e.tone==="neutral"?"default":"primary"}const p="cm-highlight-line",O=I.define(),v=I.define(),x=Q.define({create(){return _.none},update(e,n){e=e.map(n.changes);for(const t of n.effects)t.is(O)&&(e=e.update({add:[R.range(t.value)]})),t.is(v)&&(e=e.update({filter:r=>r!==t.value}));return e},toJSON(e,n){const t=[],r=e.iter();for(;r.value;){const o=n.doc.lineAt(r.from).number;t.includes(o)||t.push(o),r.next()}return t},fromJSON(e,n){const t=n.doc.lines,r=e.filter(o=>o<=t).map(o=>R.range(n.doc.line(o).from));r.sort((o,a)=>o.from-a.from);try{return _.none.update({add:r})}catch(o){return console.error(o),_.none}},provide:e=>h.decorations.from(e)}),R=_.line({class:p}),M={highlight:x};function ee(e){const{themeCtx:n}=e,t=D(n),r={color:n.theme.color.dark[t]},o={color:n.theme.color.light[t]};return h.baseTheme({".cm-lineNumbers":{cursor:"default"},".cm-line.cm-line":{position:"relative"},[`.${p}::before`]:{position:"absolute",top:0,bottom:0,left:0,right:0,zIndex:-3,content:"''",boxSizing:"border-box"},[`&dark .${p}::before`]:{background:m(r.color.muted.caution.pressed.bg,.5)},[`&light .${p}::before`]:{background:m(o.color.muted.caution.pressed.bg,.75)}})}const te=e=>{const n=ee({themeCtx:e.theme});return[x,e.readOnly?[]:Y({domEventHandlers:{mousedown:(t,r)=>{const o=t.state.doc.lineAt(r.from);let a=!1;return t.state.field(x).between(o.from,o.to,(s,d,g)=>{if(g)return a=!0,!1}),a?t.dispatch({effects:v.of(o.from)}):t.dispatch({effects:O.of(o.from)}),e!=null&&e.onHighlightChange&&e.onHighlightChange(t.state.toJSON(M).highlight),!0}}}),n]};function ne(e,n){const t=e.state.doc,r=t.lines,o=Array.from({length:r},(a,s)=>s+1);e.dispatch({effects:o.map(a=>{const s=t.line(a);return n!=null&&n.includes(a)?O.of(s.from):v.of(s.from)})})}function re(){const e=C();return l.useMemo(()=>{const n=D(e),t={color:e.theme.color.dark[n]},r={color:e.theme.color.light[n]};return h.baseTheme({"&.cm-editor":{height:"100%"},"&.cm-editor.cm-focused":{outline:"none"},"&.cm-editor.cm-focused .cm-matchingBracket":{backgroundColor:"transparent"},"&.cm-editor.cm-focused .cm-nonmatchingBracket":{backgroundColor:"transparent"},"&dark.cm-editor.cm-focused .cm-matchingBracket":{outline:`1px solid ${t.color.base.border}`},"&dark.cm-editor.cm-focused .cm-nonmatchingBracket":{outline:`1px solid ${t.color.base.border}`},"&light.cm-editor.cm-focused .cm-matchingBracket":{outline:`1px solid ${r.color.base.border}`},"&light.cm-editor.cm-focused .cm-nonmatchingBracket":{outline:`1px solid ${r.color.base.border}`},"& .cm-lineNumbers .cm-gutterElement":{minWidth:"32px !important",padding:"0 8px !important"},"& .cm-gutter.cm-foldGutter":{width:"0px !important"},"&dark .cm-gutters":{color:`${m(t.color.card.enabled.code.fg,.5)} !important`,borderRight:`1px solid ${m(t.color.base.border,.5)}`},"&light .cm-gutters":{color:`${m(r.color.card.enabled.code.fg,.5)} !important`,borderRight:`1px solid ${m(r.color.base.border,.5)}`}})},[e])}function oe(){const e=A();return l.useMemo(()=>{const{code:n}=e.sanity.fonts,{base:t,card:r,dark:o,syntax:a}=e.sanity.color;return U({theme:o?"dark":"light",settings:{background:r.enabled.bg,foreground:r.enabled.code.fg,lineHighlight:r.enabled.bg,fontFamily:n.family,caret:t.focusRing,selection:m(t.focusRing,.2),selectionMatch:m(t.focusRing,.4),gutterBackground:r.disabled.bg,gutterForeground:r.disabled.code.fg,gutterActiveForeground:r.enabled.fg},styles:[{tag:[i.heading,i.heading2,i.heading3,i.heading4,i.heading5,i.heading6],color:r.enabled.fg},{tag:i.angleBracket,color:r.enabled.code.fg},{tag:i.atom,color:a.keyword},{tag:i.attributeName,color:a.attrName},{tag:i.bool,color:a.boolean},{tag:i.bracket,color:r.enabled.code.fg},{tag:i.className,color:a.className},{tag:i.comment,color:a.comment},{tag:i.definition(i.typeName),color:a.function},{tag:[i.definition(i.variableName),i.function(i.variableName),i.className,i.attributeName],color:a.function},{tag:[i.function(i.propertyName),i.propertyName],color:a.function},{tag:i.keyword,color:a.keyword},{tag:i.null,color:a.number},{tag:i.number,color:a.number},{tag:i.meta,color:r.enabled.code.fg},{tag:i.operator,color:a.operator},{tag:i.propertyName,color:a.property},{tag:[i.string,i.special(i.brace)],color:a.string},{tag:i.tagName,color:a.className},{tag:i.typeName,color:a.keyword}]})},[e])}function ae(e){const{fontSize:n}=e,t=A();return l.useMemo(()=>{const{code:r}=t.sanity.fonts,{fontSize:o,lineHeight:a}=r.sizes[n]||r.sizes[2];return h.baseTheme({"&":{fontSize:G(o)},"& .cm-scroller":{lineHeight:`${a/o} !important`}})},[n,t])}var ie=Object.defineProperty,ce=Object.defineProperties,se=Object.getOwnPropertyDescriptors,b=Object.getOwnPropertySymbols,j=Object.prototype.hasOwnProperty,N=Object.prototype.propertyIsEnumerable,S=(e,n,t)=>n in e?ie(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t,le=(e,n)=>{for(var t in n||(n={}))j.call(n,t)&&S(e,t,n[t]);if(b)for(var t of b(n))N.call(n,t)&&S(e,t,n[t]);return e},de=(e,n)=>ce(e,se(n)),ue=(e,n)=>{var t={};for(var r in e)j.call(e,r)&&n.indexOf(r)<0&&(t[r]=e[r]);if(e!=null&&b)for(var r of b(e))n.indexOf(r)<0&&N.call(e,r)&&(t[r]=e[r]);return t};const fe=l.forwardRef(function(e,n){const t=e,{basicSetup:r,highlightLines:o,languageMode:a,onHighlightChange:s,readOnly:d,value:g}=t,y=ue(t,["basicSetup","highlightLines","languageMode","onHighlightChange","readOnly","value"]),L=C(),V=oe(),[E,H]=l.useState(void 0),w=re(),P=ae({fontSize:1}),k=ge(a),T=l.useMemo(()=>te({onHighlightChange:s,readOnly:d,theme:L}),[s,d,L]),F=l.useMemo(()=>{const f=[w,P,T,h.lineWrapping];return k?[...f,k]:f},[P,T,k,w]);l.useEffect(()=>{E&&ne(E,o??[])},[E,o,g]);const B=l.useMemo(()=>({json:{doc:g??"",selection:{main:0,ranges:[{anchor:0,head:0}]},highlight:o??[]},fields:M}),[]),z=l.useCallback(f=>{H(f)},[]),$=l.useMemo(()=>r??{highlightActiveLine:!1},[r]);return q.jsx(X,de(le({},y),{value:g,ref:n,extensions:F,theme:V,onCreateEditor:z,initialState:B,basicSetup:$}))});function ge(e){const n=l.useContext(J),[t,r]=l.useState();return l.useEffect(()=>{var o;const a=[...(o=n==null?void 0:n.codeModes)!=null?o:[],...Z].find(d=>d.name===e);a!=null&&a.loader||console.warn(`Found no codeMode for language mode ${e}, syntax highlighting will be disabled.`);let s=!0;return Promise.resolve(a==null?void 0:a.loader()).then(d=>{s&&r(d)}).catch(d=>{console.error(`Failed to load language mode ${e}`,d),s&&r(void 0)}),()=>{s=!1}},[e,n]),t}export{fe as default};
